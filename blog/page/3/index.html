<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="React Native Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="React Native Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-41298772-2","auto"),ga("send","pageview")</script>
<script async src="/cdn/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-41298772-2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-41298772-2",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="React Native" href="/opensearch.xml">
<script src="/cdn/focus-visible.min.js" defer="defer"></script>
<script src="/cdn/embed.js" defer="defer"></script><title data-react-helmet="true">Blog · React Native</title><meta data-react-helmet="true" property="twitter:image" content="https://reactnative.dev/img/logo-og.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Blog · React Native"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="description" content="A framework for building native apps using React"><meta data-react-helmet="true" property="og:title" content="React Native"><meta data-react-helmet="true" property="og:description" content="A framework for building native apps using React"><meta data-react-helmet="true" property="og:url" content="https://reactnative.dev/"><meta data-react-helmet="true" property="og:image" content="https://reactnative.dev/img/logo-og.png"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="twitter:image" content="https://reactnative.dev/img/logo-og.png"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.fccefeba.css">
<link rel="stylesheet" href="/main.102c4ce0.css">
<link rel="preload" href="/styles.73cf9778.js" as="script">
<link rel="preload" href="/runtime~main.1add4549.js" as="script">
<link rel="preload" href="/main.3b1f3498.js" as="script">
<link rel="preload" href="/1.17a0cf36.js" as="script">
<link rel="preload" href="/2.37a050b1.js" as="script">
<link rel="preload" href="/3.a77189d5.js" as="script">
<link rel="preload" href="/01a85c17.6e3f79c4.js" as="script">
<link rel="preload" href="/1be78505.5efc14b5.js" as="script">
<link rel="preload" href="/52cb2878.7b16da74.js" as="script">
<link rel="preload" href="/5fc994c2.bb75c0a3.js" as="script">
<link rel="preload" href="/6875c492.473436b1.js" as="script">
<link rel="preload" href="/a6aa9e1f.49affcc9.js" as="script">
<link rel="preload" href="/c4f5d8e4.9625a734.js" as="script">
<link rel="preload" href="/ccc49370.4fe1b01e.js" as="script">
<link rel="preload" href="/942.91182cb1.js" as="script">
<link rel="preload" href="/e4eeaf16.0a7d73bc.js" as="script">
<link rel="preload" href="/ef5977c1.29b4655a.js" as="script">
<link rel="preload" href="/e2632152.4c8e740a.js" as="script">
<link rel="preload" href="/7dac272e.8b3f909f.js" as="script">
<link rel="preload" href="/90fb1d19.242863dc.js" as="script">
<link rel="preload" href="/b6c98dba.f970a185.js" as="script">
<link rel="preload" href="/e82978d2.0308e776.js" as="script">
<link rel="preload" href="/25872cd8.f9726ec7.js" as="script">
<link rel="preload" href="/9638e746.26d650f9.js" as="script">
<link rel="preload" href="/f1e5627d.c14ad7c1.js" as="script">
<link rel="preload" href="/548ca8d1.7290d805.js" as="script">
<link rel="preload" href="/92999a1c.726e0f7e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/header_logo.svg" alt="React Native"><strong class="navbar__title">React Native</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/docs/getting-started">0.63</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/getting-started">Next</a></li><li><a class="dropdown__link" href="/docs/getting-started">0.63</a></li><li><a class="dropdown__link" href="/docs/0.62/getting-started">0.62</a></li><li><a class="dropdown__link" href="/docs/0.61/getting-started">0.61</a></li><li><a class="dropdown__link" href="/docs/0.60/getting-started">0.60</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/components-and-apis">Components</a><a class="navbar__item navbar__link" href="/docs/accessibilityinfo">API</a><a class="navbar__item navbar__link" href="/help">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_3lWe"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_gnXW">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_gnXW">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/header_logo.svg" alt="React Native"><strong class="navbar__title">React Native</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/components-and-apis">Components</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/accessibilityinfo">API</a></li><li class="menu__list-item"><a class="menu__link" href="/help">Community</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/getting-started">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">0.63</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.62/getting-started">0.62</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.61/getting-started">0.61</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.60/getting-started">0.60</a></li><li class="menu__list-item"><a class="menu__link" href="/versions">All versions</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="menu__link navbar-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_2ewA"><h3 class="sidebarItemTitle_LeXb">All Blog Posts</h3><ul class="sidebarItemList_eLFE"><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2020/07/23/docs-update">React Native Documentation Update</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2020/07/17/react-native-principles">React Native Team Principles</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2020/07/06/version-0.63">Announcing React Native 0.63 with LogBox</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2020/03/26/version-0.62">Announcing React Native 0.62 with Flipper</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/11/18/react-native-doctor">Meet Doctor, a new React Native command</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/09/18/version-0.61">Announcing React Native 0.61 with Fast Refresh</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/07/17/hermes">Meet Hermes, a new JavaScript Engine optimized for React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/07/03/version-60">Announcing React Native 0.60</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/06/12/react-native-open-source-update">React Native Open Source Update June 2019</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/05/01/react-native-at-f8-and-podcast">React Native at F8 and Open Source Podcast</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/03/12/releasing-react-native-059">Releasing React Native 0.59</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/03/01/react-native-open-source-update">React Native Open Source Update March 2019</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/01/07/state-of-react-native-community">The State of the React Native Community in 2018</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/11/01/oss-roadmap">Open Source Roadmap</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/08/27/wkwebview">Introducing new iOS WebViews</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/08/13/react-native-accessibility-updates">Accessibility API Updates</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/07/04/releasing-react-native-056">Releasing 0.56</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/06/14/state-of-react-native-2018">State of React Native 2018</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/05/07/using-typescript-with-react-native">Using TypeScript with React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/04/09/build-com-app">Built with React Native - The Build.com app</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/03/22/building-input-accessory-view-for-react-native">Building &lt;InputAccessoryView&gt; For React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/03/05/AWS-app-sync">Using AWS with React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/01/18/implementing-twitters-app-loading-animation-in-react-native">Implementing Twitter’s App Loading Animation in React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/01/09/react-native-monthly-6">React Native Monthly #6</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/11/06/react-native-monthly-5">React Native Monthly #5</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/09/21/react-native-monthly-4">React Native Monthly #4</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/08/30/react-native-monthly-3">React Native Monthly #3</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/08/07/react-native-performance-in-marketplace">React Native Performance in Marketplace</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/07/28/react-native-monthly-2">React Native Monthly #2</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/06/21/react-native-monthly-1">React Native Monthly #1</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/03/13/better-list-views">Better List Views in React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/03/13/idx-the-existential-function">idx: The Existential Function</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/03/13/introducing-create-react-native-app">Introducing Create React Native App</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/02/14/using-native-driver-for-animated">Using Native Driver for Animated</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/01/07/monthly-release-cadence">A Monthly Release Cadence: Releasing December and January RC</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/12/05/easier-upgrades">Easier Upgrades Thanks to Git</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/11/08/introducing-button-yarn-and-a-public-roadmap">Introducing Button, Faster Installs with Yarn, and a Public Roadmap</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/10/25/0.36-headless-js-the-keyboard-api-and-more">0.36: Headless JS, the Keyboard API, &amp; more</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/09/08/exponent-talks-unraveling-navigation">Expo Talks: Adam on Unraveling Navigation</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/08/19/right-to-left-support-for-react-native-apps">Right-to-Left Layout Support For React Native Apps</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/08/12/react-native-meetup-san-francisco">San Francisco Meetup Recap</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/07/06/toward-better-documentation">Toward Better Documentation</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/04/13/react-native-a-year-in-review">React Native: A year in review</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/03/28/dive-into-react-native-performance">Dive into React Native Performance</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/03/24/introducing-hot-reloading">Introducing Hot Reloading</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2015/11/23/making-react-native-apps-accessible">Making React Native apps accessible</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2015/09/14/react-native-for-android">React Native for Android: How we built the first cross-platform React Native app</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2015/03/26/react-native-bringing-modern-web-techniques-to-mobile">React Native: Bringing modern web techniques to mobile</a></li></ul></div></div><main class="col col--8"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2018/03/22/building-input-accessory-view-for-react-native">Building &lt;InputAccessoryView&gt; For React Native</a></h2><div class="margin-vert--md"><time datetime="2018-03-22T00:00:00.000Z" class="blogPostDate_BxXe">March 22, 2018  · 6 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/PeteTheHeat" target="_blank" rel="noreferrer noopener"><img src="https://avatars3.githubusercontent.com/u/6011080?s=400&amp;u=028e28081107d0ab16a5cb22baca43c080f5fa50&amp;v=4" alt="Peter Argany"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/PeteTheHeat" target="_blank" rel="noreferrer noopener">Peter Argany</a></h4><small class="avatar__subtitle">Software Engineer at Facebook</small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="motivation"></a>Motivation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#motivation" title="Direct link to heading">#</a></h2><p>Three years ago, a GitHub issue was opened to support input accessory view from React Native.</p><img src="/blog/assets/input-accessory-1.png"><p>In the ensuing years, there have been countless &#x27;+1s&#x27;, various workarounds, and zero concrete changes to RN on this issue - until today. Starting with iOS, <a href="/docs/inputaccessoryview">we&#x27;re exposing an API</a> for accessing the native input accessory view and we are excited to share how we built it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="background"></a>Background<a aria-hidden="true" tabindex="-1" class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p>What exactly is an input accessory view? Reading <a href="https://developer.apple.com/documentation/uikit/uiresponder/1621119-inputaccessoryview?language=objc" target="_blank" rel="noopener noreferrer">Apple&#x27;s developer documentation</a>, we learn that it&#x27;s a custom view which can be anchored to the top of the system keyboard whenever a receiver becomes the first responder. Anything that inherits from <code>UIResponder</code> can redeclare the <code>.inputAccessoryView</code> property as read-write, and manage a custom view here. The responder infrastructure mounts the view, and keeps it in sync with the system keyboard. Gestures which dismiss the keyboard, like a drag or tap, are applied to the input accessory view at the framework level. This allows us to build content with interactive keyboard dismissal, an integral feature in top-tier messaging apps like iMessage and WhatsApp.</p><p>There are two common use cases for anchoring a view to the top of the keyboard. The first is creating a keyboard toolbar, like the Facebook composer background picker.</p><img src="/blog/assets/input-accessory-2.gif" style="float:left;padding-right:70px;padding-top:20px"><p>In this scenario, the keyboard is focused on a text input field, and the input accessory view is used to provide additional keyboard functionality. This functionality is contextual to the type of input field. In a mapping application it could be address suggestions, or in a text editor, it could be rich text formatting tools.</p><hr style="clear:both;margin-bottom:20px"><p>The Objective-C UIResponder who owns the <code>&lt;InputAccessoryView&gt;</code> in this scenario should be clear. The <code>&lt;TextInput&gt;</code> has become first responder, and under the hood this becomes an instance of <code>UITextView</code> or <code>UITextField</code>.</p><p>The second common scenario is sticky text inputs:</p><img src="/blog/assets/input-accessory-3.gif" style="float:left;padding-right:70px;padding-top:20px"><p>Here, the text input is actually part of the input accessory view itself. This is commonly used in messaging applications, where a message can be composed while scrolling through a thread of previous messages.</p><hr style="clear:both;margin-bottom:20px"><p>Who owns the <code>&lt;InputAccessoryView&gt;</code> in this example? Can it be the <code>UITextView</code> or <code>UITextField</code> again? The text input is <em>inside</em> the input accessory view, this sounds like a circular dependency. Solving this issue alone is <a href="http://derpturkey.com/uitextfield-docked-like-ios-messenger/" target="_blank" rel="noopener noreferrer">another blog post</a> in itself. Spoilers: the owner is a generic <code>UIView</code> subclass who we manually tell to <a href="https://developer.apple.com/documentation/uikit/uiresponder/1621113-becomefirstresponder?language=objc" target="_blank" rel="noopener noreferrer">becomeFirstResponder</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="api-design"></a>API Design<a aria-hidden="true" tabindex="-1" class="hash-link" href="#api-design" title="Direct link to heading">#</a></h2><p>We now know what an <code>&lt;InputAccessoryView&gt;</code> is, and how we want to use it. The next step is designing an API that makes sense for both use cases, and works well with existing React Native components like <code>&lt;TextInput&gt;</code>.</p><p>For keyboard toolbars, there are a few things we want to consider:</p><ol><li>We want to be able to hoist any generic React Native view hierarchy into the <code>&lt;InputAccessoryView&gt;</code>.</li><li>We want this generic and detached view hierarchy to accept touches and be able to manipulate application state.</li><li>We want to link an <code>&lt;InputAccessoryView&gt;</code> to a particular <code>&lt;TextInput&gt;</code>.</li><li>We want to be able to share an <code>&lt;InputAccessoryView&gt;</code> across multiple text inputs, without duplicating any code.</li></ol><p>We can achieve #1 using a concept similar to <a href="https://reactjs.org/docs/portals.html" target="_blank" rel="noopener noreferrer">React portals</a>. In this design, we portal React Native views to a <code>UIView</code> hierarchy managed by the responder infrastructure. Since React Native views render as UIViews, this is actually quite straightforward - we can just override:</p><p><code>- (void)insertReactSubview:(UIView *)subview atIndex:(NSInteger)atIndex</code></p><p>and pipe all the subviews to a new UIView hierarchy. For #2, we set up a new <a href="https://github.com/facebook/react-native/blob/master/React/Base/RCTTouchHandler.h" target="_blank" rel="noopener noreferrer">RCTTouchHandler</a> for the <code>&lt;InputAccessoryView&gt;</code>. State updates are achieved by using regular event callbacks. For #3 and #4, we use the <a href="https://github.com/facebook/react-native/blob/master/React/Views/UIView%2BReact.h#L28" target="_blank" rel="noopener noreferrer">nativeID</a> field to locate the accessory view UIView hierarchy in native code during the creation of a <code>&lt;TextInput&gt;</code> component. This function uses the <code>.inputAccessoryView</code> property of the underlying native text input. Doing this effectively links <code>&lt;InputAccessoryView&gt;</code> to <code>&lt;TextInput&gt;</code> in their ObjC implementations.</p><p>Supporting sticky text inputs (scenario 2) adds a few more constraints. For this design, the input accessory view has a text input as a child, so linking via nativeID is not an option. Instead, we set the <code>.inputAccessoryView</code> of a generic off-screen <code>UIView</code> to our native <code>&lt;InputAccessoryView&gt;</code> hierarchy. By manually telling this generic <code>UIView</code> to become first responder, the hierarchy is mounted by responder infrastructure. This concept is explained thoroughly in the aforementioned blog post.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="pitfalls"></a>Pitfalls<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pitfalls" title="Direct link to heading">#</a></h2><p>Of course not everything was smooth sailing while building this API. Here are a few pitfalls we encountered, along with how we fixed them.</p><p>An initial idea for building this API involved listening to <code>NSNotificationCenter</code> for UIKeyboardWill(Show/Hide/ChangeFrame) events. This pattern is used in some open-sourced libraries, and internally in some parts of the Facebook app. Unfortunately, <code>UIKeyboardDidChangeFrame</code> events were not being called in time to update the <code>&lt;InputAccessoryView&gt;</code> frame on swipes. Also, changes in keyboard height are not captured by these events. This creates a class of bugs that manifest like this:</p><img src="/blog/assets/input-accessory-4.gif" style="float:left;padding-right:70px;padding-top:20px"><p>On iPhone X, text and emoji keyboard are different heights. Most applications using keyboard events to manipulate text input frames had to fix the above bug. Our solution was to commit to using the <code>.inputAccessoryView</code> property, which meant that the responder infrastructure handles frame updates like this.</p><hr style="clear:both;margin-bottom:20px"><p>Another tricky bug we encountered was avoiding the home pill on iPhone X. You may be thinking, “Apple developed <a href="https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide?language=objc" target="_blank" rel="noopener noreferrer">safeAreaLayoutGuide</a> for this very reason, this is trivial!”. We were just as naive. The first issue is that the native <code>&lt;InputAccessoryView&gt;</code> implementation has no window to anchor to until the moment it is about to appear. That&#x27;s alright, we can override <code>-(BOOL)becomeFirstResponder</code> and enforce layout constraints there. Adhering to these constraints bumps the accessory view up, but another bug arises: <img src="/blog/assets/input-accessory-5.gif" style="float:left;padding-right:70px;padding-top:20px"></p><p>The input accessory view successfully avoids the home pill, but now content behind the unsafe area is visible. The solution lies in this <a href="http://www.openradar.me/34411433" target="_blank" rel="noopener noreferrer">radar</a>. I wrapped the native <code>&lt;InputAccessoryView&gt;</code> hierarchy in a container which doesn&#x27;t conform to the <code>safeAreaLayoutGuide</code> constraints. The native container covers the content in the unsafe area, while the <code>&lt;InputAccessoryView&gt;</code> stays within the safe area boundaries.</p><hr style="clear:both;margin-bottom:20px"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="example-usage"></a>Example Usage<a aria-hidden="true" tabindex="-1" class="hash-link" href="#example-usage" title="Direct link to heading">#</a></h2><p>Here&#x27;s an example which builds a keyboard toolbar button to reset <code>&lt;TextInput&gt;</code> state.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">TextInputAccessoryViewExample</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">React</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Component</span><span class="token operator" style="color:#fc929e">&lt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">{</span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">constructor</span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">super</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Placeholder Text&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">render</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> inputAccessoryViewID </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;inputAccessoryView1&#x27;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">TextInput</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">          </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">default</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">          </span><span class="token tag attr-name" style="color:#c5a5c5">inputAccessoryViewID</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">inputAccessoryViewID</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">          </span><span class="token tag attr-name" style="color:#c5a5c5">onChangeText</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">(</span><span class="token tag script language-javascript parameter" style="color:#fc929e">text</span><span class="token tag script language-javascript punctuation" style="color:#657b83">)</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript operator" style="color:#fc929e">=&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript keyword" style="color:#c5a5c5">this</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript function" style="color:#79b6f2">setState</span><span class="token tag script language-javascript punctuation" style="color:#657b83">(</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> text </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">)</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">          </span><span class="token tag attr-name" style="color:#c5a5c5">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript keyword" style="color:#c5a5c5">this</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">state</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">text</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">        </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">InputAccessoryView</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">nativeID</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">inputAccessoryViewID</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> backgroundColor</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript string" style="color:#8dc891">&#x27;white&#x27;</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">Button</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">              </span><span class="token tag attr-name" style="color:#c5a5c5">onPress</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">(</span><span class="token tag script language-javascript punctuation" style="color:#657b83">)</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript operator" style="color:#fc929e">=&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">                </span><span class="token tag script language-javascript keyword" style="color:#c5a5c5">this</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript function" style="color:#79b6f2">setState</span><span class="token tag script language-javascript punctuation" style="color:#657b83">(</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> text</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript string" style="color:#8dc891">&#x27;Placeholder Text&#x27;</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">)</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">              </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">              </span><span class="token tag attr-name" style="color:#c5a5c5">title</span><span class="token tag attr-value punctuation" style="color:#657b83">=</span><span class="token tag attr-value punctuation" style="color:#657b83">&quot;</span><span class="token tag attr-value" style="color:#8dc891">Reset Text</span><span class="token tag attr-value punctuation" style="color:#657b83">&quot;</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">            </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">InputAccessoryView</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span></div></div></div></div></div><p>Another example for <a href="https://github.com/facebook/react-native/blob/84ef7bc372ad870127b3e1fb8c13399fe09ecd4d/RNTester/js/InputAccessoryViewExample.js" target="_blank" rel="noopener noreferrer">Sticky Text Inputs can be found in the repository</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="when-will-i-be-able-to-use-this"></a>When will I be able to use this?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#when-will-i-be-able-to-use-this" title="Direct link to heading">#</a></h2><p>The full commit for this feature implementation is <a href="https://github.com/facebook/react-native/commit/38197c8230657d567170cdaf8ff4bbb4aee732b8" target="_blank" rel="noopener noreferrer">here</a>. <a href="/docs/next/inputaccessoryview"><code>&lt;InputAccessoryView&gt;</code></a> will be available in the upcoming v0.55.0 release.</p><p>Happy keyboarding :)</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2018/03/05/AWS-app-sync">Using AWS with React Native</a></h2><div class="margin-vert--md"><time datetime="2018-03-05T00:00:00.000Z" class="blogPostDate_BxXe">March 5, 2018  · 9 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://twitter.com/undef_obj" target="_blank" rel="noreferrer noopener"><img src="https://pbs.twimg.com/profile_images/811239086581227520/APX1eZwF_400x400.jpg" alt="Richard Threlkeld"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://twitter.com/undef_obj" target="_blank" rel="noreferrer noopener">Richard Threlkeld</a></h4><small class="avatar__subtitle">Senior Technical Product Manager at AWS Mobile</small></div></div></header><section class="markdown"><p>AWS is well known in the technology industry as a provider of cloud services. These include compute, storage, and database technologies, as well as fully managed serverless offerings. The AWS Mobile team has been working closely with customers and members of the JavaScript ecosystem to make cloud-connected mobile and web applications more secure, scalable, and easier to develop and deploy. We began with a <a href="https://github.com/awslabs/aws-mobile-react-native-starter" target="_blank" rel="noopener noreferrer">complete starter kit</a>, but have a few more recent developments.</p><p>This blog post talks about some interesting things for React and React Native developers:</p><ul><li><a href="https://github.com/aws/aws-amplify" target="_blank" rel="noopener noreferrer"><strong>AWS Amplify</strong></a>, a declarative library for JavaScript applications using cloud services</li><li><a href="https://aws.amazon.com/appsync/" target="_blank" rel="noopener noreferrer"><strong>AWS AppSync</strong></a>, a fully managed GraphQL service with offline and real-time features</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="aws-amplify"></a>AWS Amplify<a aria-hidden="true" tabindex="-1" class="hash-link" href="#aws-amplify" title="Direct link to heading">#</a></h2><p>React Native applications are very easy to bootstrap using tools like Create React Native App and Expo. However, connecting them to the cloud can be challenging to navigate when you try to match a use case to infrastructure services. For example, your React Native app might need to upload photos. Should these be protected per user? That probably means you need some sort of registration or sign-in process. Do you want your own user directory or are you using a social media provider? Maybe your app also needs to call an API with custom business logic after users log in.</p><p>To help JavaScript developers with these problems, we released a library named AWS Amplify. The design is broken into &quot;categories&quot; of tasks, instead of AWS-specific implementations. For example, if you wanted users to register, log in, and then upload private photos, you would simply pull in <code>Auth</code> and <code>Storage</code> categories to your application:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> Auth </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;aws-amplify&#x27;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">Auth</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">signIn</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">username</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> password</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">then</span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter">user</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">catch</span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">Auth</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">confirmSignIn</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> code</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">then</span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter">data</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">catch</span><span class="token punctuation" style="color:#657b83">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> console</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>In the code above, you can see an example of some of the common tasks that Amplify helps you with, such as using multi-factor authentication (MFA) codes with either email or SMS. The supported categories today are:</p><ul><li><strong>Auth</strong>: Provides credential automation. Out-of-the-box implementation uses AWS credentials for signing, and OIDC JWT tokens from <a href="https://aws.amazon.com/cognito/" target="_blank" rel="noopener noreferrer">Amazon Cognito</a>. Common functionality, such as MFA features, is supported.</li><li><strong>Analytics</strong>: With a single line of code, get tracking for authenticated or unauthenticated users in <a href="https://aws.amazon.com/pinpoint/" target="_blank" rel="noopener noreferrer">Amazon Pinpoint</a>. Extend this for custom metrics or attributes, as you prefer.</li><li><strong>API</strong>: Provides interaction with RESTful APIs in a secure manner, leveraging <a href="https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html" target="_blank" rel="noopener noreferrer">AWS Signature Version 4</a>. The API module is great on serverless infrastructures with <a href="https://aws.amazon.com/api-gateway/" target="_blank" rel="noopener noreferrer">Amazon API Gateway</a>.</li><li><strong>Storage</strong>: Simplified commands to upload, download, and list content in <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a>. You can also easily group data into public or private content on a per-user basis.</li><li><strong>Caching</strong>: An LRU cache interface across web apps and React Native that uses implementation-specific persistence.</li><li><strong>i18n and Logging</strong>: Provides internationalization and localization capabilities, as well as debugging and logging capabilities.</li></ul><p>One of the nice things about Amplify is that it encodes &quot;best practices&quot; in the design for your specific programming environment. For example, one thing we found working with customers and React Native developers is that shortcuts taken during development to get things working quickly would make it through to production stacks. These can compromise either scalability or security, and force infrastructure rearchitecture and code refactoring.</p><p>One example of how we help developers avoid this is the <a href="https://www.allthingsdistributed.com/2016/06/aws-lambda-serverless-reference-architectures.html" target="_blank" rel="noopener noreferrer">Serverless Reference Architectures with AWS Lambda</a>. These show you best practices around using Amazon API Gateway and AWS Lambda together when building your backend. This pattern is encoded into the <code>API</code> category of Amplify. You can use this pattern to interact with several different REST endpoints, and pass headers all the way through to your Lambda function for custom business logic. We’ve also released an <a href="https://docs.aws.amazon.com/aws-mobile/latest/developerguide/react-native-getting-started.html" target="_blank" rel="noopener noreferrer">AWS Mobile CLI</a> for bootstrapping new or existing React Native projects with these features. To get started, just install via <strong>npm</strong>, and follow the configuration prompts:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">npm install </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">global awsmobile</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">cli</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">awsmobile configure</span></div></div></div></div></div><p>Another example of encoded best practices that is specific to the mobile ecosystem is password security. The default <code>Auth</code> category implementation leverages Amazon Cognito user pools for user registration and sign-in. This service implements <a href="http://srp.stanford.edu" target="_blank" rel="noopener noreferrer">Secure Remote Password protocol</a> as a way of protecting users during authentication attempts. If you&#x27;re inclined to read through the <a href="http://srp.stanford.edu/ndss.html#SECTION00032200000000000000" target="_blank" rel="noopener noreferrer">mathematics of the protocol</a>, you&#x27;ll notice that you must use a large prime number when calculating the password verifier over a primitive root to generate a Group. In React Native environments, <a href="/docs/javascript-environment">JIT is disabled</a>. This makes BigInteger calculations for security operations such as this less performant. To account for this, we&#x27;ve released native bridges in Android and iOS that you can link inside your project:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">npm install </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">save aws</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">amplify</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">react</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">native</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">react</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">native link amazon</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">cognito</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">identity</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">js</span></div></div></div></div></div><p>We&#x27;re also excited to see that the Expo team has included this <a href="https://blog.expo.io/expo-sdk-v25-0-0-is-now-available-714d10a8c3f7" target="_blank" rel="noopener noreferrer">in their latest SDK</a> so that you can use Amplify without ejecting.</p><p>Finally, specific to React Native (and React) development, Amplify contains <a href="https://reactjs.org/docs/higher-order-components.html" target="_blank" rel="noopener noreferrer">higher order components (HOCs)</a> for easily wrapping functionality, such as for sign-up and sign-in to your app:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Amplify</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> withAuthenticator </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;aws-amplify-react-native&#x27;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> aws_exports </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;./aws-exports&#x27;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">Amplify</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">configure</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">aws_exports</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">App</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">React</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token operator" style="color:#fc929e">...</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">export</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">withAuthenticator</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">App</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>The underlying component is also provided as <code>&lt;Authenticator /&gt;</code>, which gives you full control to customize the UI. It also gives you some properties around managing the state of the user, such as if they&#x27;ve signed in or are waiting for MFA confirmation, and callbacks that you can fire when state changes.</p><p>Similarly, you&#x27;ll find general React components that you can use for different use cases. You can customize these to your needs, for example, to show all private images from Amazon S3 in the <code>Storage</code> module:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">S3Album</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">  </span><span class="token tag attr-name" style="color:#c5a5c5">level</span><span class="token tag attr-value punctuation" style="color:#657b83">=</span><span class="token tag attr-value punctuation" style="color:#657b83">&quot;</span><span class="token tag attr-value" style="color:#8dc891">private</span><span class="token tag attr-value punctuation" style="color:#657b83">&quot;</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">  </span><span class="token tag attr-name" style="color:#c5a5c5">path</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">path</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">  </span><span class="token tag attr-name" style="color:#c5a5c5">filter</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">(</span><span class="token tag script language-javascript parameter" style="color:#fc929e">item</span><span class="token tag script language-javascript punctuation" style="color:#657b83">)</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript operator" style="color:#fc929e">=&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript regex" style="color:#8dc891">/jpg/i</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript function" style="color:#79b6f2">test</span><span class="token tag script language-javascript punctuation" style="color:#657b83">(</span><span class="token tag script language-javascript" style="color:#fc929e">item</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">path</span><span class="token tag script language-javascript punctuation" style="color:#657b83">)</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">/&gt;</span></div></div></div></div></div><p>You can control many of the component features via props, as shown earlier, with public or private storage options. There are even capabilities to automatically gather analytics when users interact with certain UI components:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">S3Album</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">track</span><span class="token tag punctuation" style="color:#657b83">/&gt;</span></div></div></div></div></div><p>AWS Amplify favors a convention over configuration style of development, with a global initialization routine or initialization at the category level. The quickest way to get started is with an <a href="https://aws.amazon.com/blogs/mobile/enhanced-javascript-development-with-aws-mobile-hub/" target="_blank" rel="noopener noreferrer">aws-exports file</a>. However, developers can also use the library independently with existing resources.</p><p>For a deep dive into the philosophy and to see a full demo, check out the video from <a href="https://www.youtube.com/watch?v=vAjf3lyjf8c" target="_blank" rel="noopener noreferrer">AWS re:Invent</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="aws-appsync"></a>AWS AppSync<a aria-hidden="true" tabindex="-1" class="hash-link" href="#aws-appsync" title="Direct link to heading">#</a></h2><p>Shortly after the launch of AWS Amplify, we also released <a href="https://aws.amazon.com/appsync/" target="_blank" rel="noopener noreferrer">AWS AppSync</a>. This is a fully managed GraphQL service that has both offline and real-time capabilities. Although you can use GraphQL in different client programming languages (including native Android and iOS), it&#x27;s quite popular among React Native developers. This is because the data model fits nicely into a unidirectional data flow and component hierarchy.</p><p>AWS AppSync enables you to connect to resources in your own AWS account, meaning you own and control your data. This is done by using data sources, and the service supports <a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener noreferrer">Amazon DynamoDB</a>, <a href="https://aws.amazon.com/elasticsearch-service/" target="_blank" rel="noopener noreferrer">Amazon Elasticsearch</a>, and <a href="https://aws.amazon.com/lambda/" target="_blank" rel="noopener noreferrer">AWS Lambda</a>. This enables you to combine functionality (such as NoSQL and full-text search) in a single GraphQL API as a schema. This enables you to mix and match data sources. The AppSync service can also <a href="https://docs.aws.amazon.com/appsync/latest/devguide/provision-from-schema.html" target="_blank" rel="noopener noreferrer">provision from a schema</a>, so if you aren&#x27;t familiar with AWS services, you can write GraphQL SDL, click a button, and you&#x27;re automatically up and running.</p><p>The real-time functionality in AWS AppSync is controlled via <a href="http://graphql.org/blog/subscriptions-in-graphql-and-relay/" target="_blank" rel="noopener noreferrer">GraphQL subscriptions with a well-known, event-based pattern</a>. Because subscriptions in AWS AppSync are <a href="https://docs.aws.amazon.com/appsync/latest/devguide/real-time-data.html" target="_blank" rel="noopener noreferrer">controlled on the schema</a> with a GraphQL directive, and a schema can use any data source, this means you can trigger notifications from database operations with Amazon DynamoDB and Amazon Elasticsearch Service, or from other parts of your infrastructure with AWS Lambda.</p><p>In a way similar to AWS Amplify, you can use <a href="https://docs.aws.amazon.com/appsync/latest/devguide/security.html" target="_blank" rel="noopener noreferrer">enterprise security features</a> on your GraphQL API with AWS AppSync. The service lets you get started quickly with API keys. However, as you roll to production it can transition to using AWS Identity and Access Management (IAM) or OIDC tokens from Amazon Cognito user pools. You can control access at the resolver level with policies on types. You can even use logical checks for <a href="https://docs.aws.amazon.com/appsync/latest/devguide/security.html#fine-grained-access-control" target="_blank" rel="noopener noreferrer">fine-grained access control</a> checks at run time, such as detecting if a user is the owner of a specific database resource. There are also capabilities around checking group membership for executing resolvers or individual database record access.</p><p>To help React Native developers learn more about these technologies, there is a <a href="https://docs.aws.amazon.com/appsync/latest/devguide/quickstart.html" target="_blank" rel="noopener noreferrer">built-in GraphQL sample schema</a> that you can launch on the AWS AppSync console homepage. This sample deploys a GraphQL schema, provisions database tables, and connects queries, mutations, and subscriptions automatically for you. There is also a functioning <a href="https://github.com/aws-samples/aws-mobile-appsync-events-starter-react-native" target="_blank" rel="noopener noreferrer">React Native example for AWS AppSync</a> which leverages this built in schema (as well as a <a href="https://github.com/aws-samples/aws-mobile-appsync-events-starter-react" target="_blank" rel="noopener noreferrer">React example</a>), which enable you to get both your client and cloud components running in minutes.</p><p>Getting started is simple when you use the <code>AWSAppSyncClient</code>, which plugs in to the <a href="https://github.com/apollographql/apollo-client" target="_blank" rel="noopener noreferrer">Apollo Client</a>. The <code>AWSAppSyncClient</code> handles security and signing for your GraphQL API, offline functionality, and the subscription handshake and negotiation process:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> AWSAppSyncClient </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;aws-appsync&quot;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> Rehydrated </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;aws-appsync-react&#x27;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">AUTH_TYPE</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;aws-appsync/lib/link/auth-link&quot;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> client </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">AWSAppSyncClient</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  url</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> awsconfig</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">graphqlEndpoint</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  region</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> awsconfig</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">region</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  auth</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">type</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">AUTH_TYPE</span><span class="token punctuation" style="color:#657b83">.</span><span class="token constant" style="color:#5a9bcf">API_KEY</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> apiKey</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> awsconfig</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">apiKey</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>The AppSync console provides a configuration file for download, which contains your GraphQL endpoint, AWS Region, and API key. You can then use the client with <a href="https://github.com/apollographql/react-apollo" target="_blank" rel="noopener noreferrer">React Apollo</a>:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">WithProvider</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">ApolloProvider</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">client</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">client</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">Rehydrated</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">App</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">Rehydrated</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">ApolloProvider</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>At this point, you can use standard GraphQL queries:</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">query ListEvents </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    listEvents</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      items</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        __typename</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        id</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        name</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        where</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        when</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        description</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        comments</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">          __typename</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">          items</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">            __typename</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">            eventId</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">            commentId</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">            content</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">            createdAt</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">          </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">          nextToken</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span></div></div></div></div></div><p>The example above shows a query with the sample app schema provisioned by AppSync. It not only showcases interaction with DynamoDB, but also includes pagination of data (including encrypted tokens) and type relations between <code>Events</code> and <code>Comments</code>. Because the app is configured with the <code>AWSAppSyncClient</code>, data is automatically persisted offline and will synchronize when devices reconnect.</p><p>You can see a deep dive of the <a href="https://www.youtube.com/watch?v=FtkVlIal_m0" target="_blank" rel="noopener noreferrer">client technology behind this and a React Native demo in this video</a>.</p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/FtkVlIal_m0?rel=0" frameborder="0" allow="autoplay; encrypted-media"></iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="feedback"></a>Feedback<a aria-hidden="true" tabindex="-1" class="hash-link" href="#feedback" title="Direct link to heading">#</a></h2><p>The team behind the libraries is eager to hear how these libraries and services work for you. They also want to hear what else we can do to make React and React Native development with cloud services easier for you. Reach out to the AWS Mobile team on GitHub for <a href="https://github.com/aws/aws-amplify" target="_blank" rel="noopener noreferrer">AWS Amplify</a> or <a href="https://github.com/aws-samples/aws-mobile-appsync-events-starter-react-native" target="_blank" rel="noopener noreferrer">AWS AppSync</a>.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2018/01/18/implementing-twitters-app-loading-animation-in-react-native">Implementing Twitter’s App Loading Animation in React Native</a></h2><div class="margin-vert--md"><time datetime="2018-01-18T00:00:00.000Z" class="blogPostDate_BxXe">January 18, 2018  · 11 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/TheSavior" target="_blank" rel="noreferrer noopener"><img src="https://avatars2.githubusercontent.com/u/249164?s=460&amp;v=4" alt="Eli White"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/TheSavior" target="_blank" rel="noreferrer noopener">Eli White</a></h4><small class="avatar__subtitle">Software Engineer at Facebook</small></div></div></header><section class="markdown"><p>Twitter’s iOS app has a loading animation I quite enjoy.</p><img src="/blog/assets/loading-screen-01.gif" style="float:left;padding-right:80px;padding-bottom:20px"><p>Once the app is ready, the Twitter logo delightfully expands, revealing the app.</p><p>I wanted to figure out how to recreate this loading animation with React Native.</p><hr style="clear:both;margin-bottom:40px;width:80px"><p>To understand <em>how</em> to build it, I first had to understand the difference pieces of the loading animation. The easiest way to see the subtlety is to slow it down.</p><img src="/blog/assets/loading-screen-02.gif" style="margin-top:20px;float:left;padding-right:80px;padding-bottom:20px"><p>There are a few major pieces in this that we will need to figure out how to build.</p><ol><li>Scaling the bird.</li><li>As the bird grows, showing the app underneath</li><li>Scaling the app down slightly at the end</li></ol><p>It took me quite a while to figure out how to make this animation.</p><p>I started with an <em>incorrect</em> assumption that the blue background and Twitter bird were a layer on <em>top</em> of the app and that as the bird grew, it became transparent which revealed the app underneath. This approach doesn’t work because the Twitter bird becoming transparent would show the blue layer, not the app underneath!</p><p>Luckily for you, dear reader, you don’t have to go through the same frustration I did. You get this nice tutorial skipping to the good stuff!</p><hr style="clear:both;margin-bottom:40px;width:80px"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="the-right-way"></a>The right way<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-right-way" title="Direct link to heading">#</a></h2><p>Before we get to code, it is important to understand how to break this down. To help visualize this effect, I recreated it in <a href="https://codepen.io/TheSavior/pen/NXNoJM" target="_blank" rel="noopener noreferrer">CodePen</a> (embedded in a few paragraphs) so you can interactively see the different layers.</p><img src="/blog/assets/loading-screen-03.png" style="float:left;padding-right:80px;padding-bottom:20px"><p>There are three main layers to this effect. The first is the blue background layer. Even though this seems to appear on top of the app, it is actually in the back.</p><p>We then have a plain white layer. And then lastly, in the very front, is our app.</p><hr style="clear:both;margin-bottom:40px;width:80px"><img src="/blog/assets/loading-screen-04.png" style="float:left;padding-right:80px;padding-bottom:20px"><p>The main trick to this animation is using the Twitter logo as a <code>mask</code> and masking both the app, and the white layer. I won’t go too deep on the details of masking, there are <a href="https://www.html5rocks.com/en/tutorials/masking/adobe/" target="_blank" rel="noopener noreferrer">plenty</a> of <a href="https://designshack.net/articles/graphics/a-complete-beginners-guide-to-masking-in-photoshop/" target="_blank" rel="noopener noreferrer">resources</a> <a href="https://www.sketchapp.com/docs/shapes/masking/" target="_blank" rel="noopener noreferrer">online</a> for that.</p><p>The basics of masking in this context are having images where opaque pixels of the mask show the content they are masking whereas transparent pixels of the mask hide the content they are masking.</p><p>We use the Twitter logo as a mask, and having it mask two layers; the solid white layer, and the app layer.</p><p>To reveal the app, we scale the mask up until it is larger than the entire screen.</p><p>While the mask is scaling up, we fade in the opacity of the app layer, showing the app and hiding the solid white layer behind it. To finish the effect, we start the app layer at a scale &gt; 1, and scale it down to 1 as the animation is ending. We then hide the non-app layers as they will never be seen again.</p><p>They say a picture is worth 1,000 words. How many words is an interactive visualization worth? Click through the animation with the “Next Step” button. Showing the layers gives you a side view perspective. The grid is there to help visualize the transparent layers.</p><iframe height="750" scrolling="no" title="Loading Screen Animation Steps" src="//codepen.io/TheSavior/embed/NXNoJM/?height=265&amp;theme-id=0&amp;default-tab=result&amp;embed-version=2" frameborder="no" allowtransparency="true" allowfullscreen="" class="codepen">See the Pen <a href="https://codepen.io/TheSavior/pen/NXNoJM/" target="_blank" rel="noopener noreferrer">Loading Screen Animation Steps</a> by Eli White (<a href="https://codepen.io/TheSavior" target="_blank" rel="noopener noreferrer">@TheSavior</a>) on <a href="https://codepen.io" target="_blank" rel="noopener noreferrer">CodePen</a>.</iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="now-for-the-react-native"></a>Now, for the React Native<a aria-hidden="true" tabindex="-1" class="hash-link" href="#now-for-the-react-native" title="Direct link to heading">#</a></h2><p>Alrighty. Now that we know what we are building and how the animation works, we can get down to the code — the reason you are really here.</p><p>The main piece of this puzzle is <a href="/docs/maskedviewios">MaskedViewIOS</a>, a core React Native component.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> MaskedViewIOS </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;react-native&#x27;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">maskElement</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">Text</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e">Basic Mask</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">Text</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> backgroundColor</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript string" style="color:#8dc891">&#x27;blue&#x27;</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p><code>MaskedViewIOS</code> takes props <code>maskElement</code> and <code>children</code>. The children are masked by the <code>maskElement</code>. Note that the mask doesn’t need to be an image, it can be any arbitrary view. The behavior of the above example would be to render the blue view, but for it to be visible only where the words “Basic Mask” are from the <code>maskElement</code>. We just made complicated blue text.</p><p>What we want to do is render our blue layer, and then on top render our masked app and white layers with the Twitter logo.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  fullScreenBlueLayer</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">  </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> flex</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript number" style="color:#5a9bcf">1</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">  </span><span class="token tag attr-name" style="color:#c5a5c5">maskElement</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">    </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">View</span><span class="token tag script language-javascript tag" style="color:#fc929e"> </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">centeredFullScreen</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">      </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">Image</span><span class="token tag script language-javascript tag" style="color:#fc929e"> </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">source</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">twitterLogo</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag" style="color:#fc929e"> </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">/&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">    </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">View</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">  </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">fullScreenWhiteLayer</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> flex</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript number" style="color:#5a9bcf">1</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">MyApp</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>This will give us the layers we see below.</p><img src="/blog/assets/loading-screen-04.png" style="margin-left:auto;margin-right:auto;display:block"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="now-for-the-animated-part"></a>Now for the Animated part<a aria-hidden="true" tabindex="-1" class="hash-link" href="#now-for-the-animated-part" title="Direct link to heading">#</a></h2><p>We have all the pieces we need to make this work, the next step is animating them. To make this animation feel good, we will be utilizing React Native’s <a href="/docs/animated">Animated</a> API.</p><p>Animated lets us define our animations declaratively in JavaScript. By default, these animations run in JavaScript and tell the native layer what changes to make on every frame. Even though JavaScript will try to update the animation every frame, it will likely not be able to do that fast enough and will cause dropped frames (jank) to occur. Not what we want!</p><p>Animated has special behavior to allow you to get animations without this jank. Animated has a flag called <code>useNativeDriver</code> which sends your animation definition from JavaScript to native at the beginning of your animation, allowing the native side to process the updates to your animation without having to go back and forth to JavaScript every frame. The downside of <code>useNativeDriver</code> is you can only update a specific set of properties, mostly <code>transform</code> and <code>opacity</code>. You can’t animate things like background color with <code>useNativeDriver</code>, at least not yet — we will add more over time, and of course you can always submit a PR for properties you need for your project, benefitting the whole community 😀.</p><p>Since we want this animation to be smooth, we will work within these constraints. For a more in depth look at how <code>useNativeDriver</code> works under the hood, check out our <a href="/blog/2017/02/14/using-native-driver-for-animated">blog post announcing it</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="breaking-down-our-animation"></a>Breaking down our animation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#breaking-down-our-animation" title="Direct link to heading">#</a></h2><p>There are 4 components to our animation:</p><ol><li>Enlarge the bird, revealing the app and the solid white layer</li><li>Fade in the app</li><li>Scale down the app</li><li>Hide the white layer and blue layer when it is done</li></ol><p>With Animated, there are two main ways to define your animation. The first is by using <code>Animated.timing</code> which lets you say exactly how long your animation will run for, along with an easing curve to smooth out the motion. The other approach is by using the physics based apis such as <code>Animated.spring</code>. With <code>Animated.spring</code>, you specify parameters like the amount of friction and tension in the spring, and let physics run your animation.</p><p>We have multiple animations we want to be running at the same time which are all closely related to each other. For example, we want the app to start fading in while the mask is mid-reveal. Because these animations are closely related, we will use <code>Animated.timing</code> with a single <code>Animated.Value</code>.</p><p><code>Animated.Value</code> is a wrapper around a native value that Animated uses to know the state of an animation. You typically want to only have one of these for a complete animation. Most components that use Animated will store the value in state.</p><p>Since I’m thinking about this animation as steps occurring at different points in time along the complete animation, we will start our <code>Animated.Value</code> at 0, representing 0% complete, and end our value at 100, representing 100% complete.</p><p>Our initial component state will be the following.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">state </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  loadingProgress</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">Animated</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Value</span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>When we are ready to begin the animation, we tell Animated to animate this value to 100.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">Animated</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">timing</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">loadingProgress</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  toValue</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  duration</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1000</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  useNativeDriver</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// This is important!</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">start</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>I then try to figure out a rough estimate of the different pieces of the animations and the values I want them to have at different stages of the overall animation. Below is a table of the different pieces of the animation, and what I think their values should be at different points as we progress through time.</p><p><img src="/assets/images/loading-screen-05-9b5c5f9b785287a11b6444ad4a8afcad.png"></p><p>The Twitter bird mask should start at scale 1, and it gets smaller before it shoots up in size. So at 10% through the animation, it should have a scale value of .8 before shooting up to scale 70 at the end. Picking 70 was pretty arbitrary to be honest, it needed to be large enough that the bird fully revealed the screen and 60 wasn’t big enough 😀. Something interesting about this part though is that the higher the number, the faster it will look like it is growing because it has to get there in the same amount of time. This number took some trial and error to make look good with this logo. Logos / devices of different sizes will require this end-scale to be different to ensure the entire screen is revealed.</p><p>The app should stay opaque for a while, at least through the Twitter logo getting smaller. Based on the official animation, I want to start showing it when the bird is mid way through scaling it up and to fully reveal it pretty quickly. So at 15% we start showing it, and at 30% through the overall animation it is fully visible.</p><p>The app scale starts at 1.1 and scales down to its regular scale by the end of the animation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="and-now-in-code"></a>And now, in code.<a aria-hidden="true" tabindex="-1" class="hash-link" href="#and-now-in-code" title="Direct link to heading">#</a></h2><p>What we essentially did above is map the values from the animation progress percentage to the values for the individual pieces. We do that with Animated using <code>.interpolate</code>. We create 3 different style objects, one for each piece of the animation, using interpolated values based off of <code>this.state.loadingProgress</code>.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> loadingProgress </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">loadingProgress</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> opacityClearToVisible </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  opacity</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> loadingProgress</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">interpolate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    inputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">30</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    outputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    extrapolate</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;clamp&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token comment" style="color:#93a1a1">// clamp means when the input is 30-100, output should stay at 1</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> imageScale </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  transform</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      scale</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> loadingProgress</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">interpolate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        inputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">10</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        outputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0.8</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">70</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> appScale </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  transform</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      scale</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> loadingProgress</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">interpolate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        inputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        outputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">1.1</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>Now that we have these style objects, we can use them when rendering the snippet of the view from earlier in the post. Note that only <code>Animated.View</code>, <code>Animated.Text</code>, and <code>Animated.Image</code> are able to use style objects that use <code>Animated.Value</code>.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fullScreenBlueLayer </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreenBlueLayer</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fullScreenWhiteLayer </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreenWhiteLayer</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreen</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">fullScreenBlueLayer</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">      </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> flex</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript number" style="color:#5a9bcf">1</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">      </span><span class="token tag attr-name" style="color:#c5a5c5">maskElement</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">        </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">View</span><span class="token tag script language-javascript tag" style="color:#fc929e"> </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">centeredFullScreen</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">          </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">Animated.Image</span><span class="token tag script language-javascript tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript tag" style="color:#fc929e">            </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">[</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">maskImageStyle</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">,</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e"> imageScale</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">]</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript tag" style="color:#fc929e">            </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">source</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">twitterLogo</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript tag" style="color:#fc929e">          </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">/&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">        </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">View</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">      </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">fullScreenWhiteLayer</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">Animated.View</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">        </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">[</span><span class="token tag script language-javascript" style="color:#fc929e">opacityClearToVisible</span><span class="token tag script language-javascript punctuation" style="color:#657b83">,</span><span class="token tag script language-javascript" style="color:#fc929e"> appScale</span><span class="token tag script language-javascript punctuation" style="color:#657b83">,</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> flex</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript number" style="color:#5a9bcf">1</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">]</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">{</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">children</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">Animated.View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><img src="/blog/assets/loading-screen-06.gif" style="float:left;padding-right:80px;padding-bottom:20px"><p>Yay! We now have the animation pieces looking like we want. Now we just have to clean up our blue and white layers which will never be seen again.</p><p>To know when we can clean them up, we need to know when the animation is complete. Luckily where we call, <code>Animated.timing</code> ,<code>.start</code> takes an optional callback that runs when the animation is complete.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">Animated</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">timing</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">loadingProgress</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  toValue</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  duration</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1000</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  useNativeDriver</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">start</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">setState</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    animationDone</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>Now that we have a value in <code>state</code> to know whether we are done with the animation, we can modify our blue and white layers to use that.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fullScreenBlueLayer </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">animationDone </span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">[</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreenBlueLayer</span><span class="token tag script language-javascript punctuation" style="color:#657b83">]</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fullScreenWhiteLayer </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">animationDone </span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">[</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreenWhiteLayer</span><span class="token tag script language-javascript punctuation" style="color:#657b83">]</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>Voila! Our animation now works and we clean up our unused layers once the animation is done. We have built the Twitter app loading animation!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="but-wait-mine-doesnt-work"></a>But wait, mine doesn’t work!<a aria-hidden="true" tabindex="-1" class="hash-link" href="#but-wait-mine-doesnt-work" title="Direct link to heading">#</a></h2><p>Don’t fret, dear reader. I too hate when guides only give you chunks of the code and don’t give you the completed source.</p><p>This component has been published to npm and is on GitHub as <a href="https://github.com/TheSavior/react-native-mask-loader" target="_blank" rel="noopener noreferrer">react-native-mask-loader</a>. To try this out on your phone, it is <a href="https://expo.io/@eliwhite/react-native-mask-loader-example" target="_blank" rel="noopener noreferrer">available on Expo</a> here:</p><img src="/blog/assets/loading-screen-07.png" style="margin-left:auto;margin-right:auto;display:block"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="more-reading--extra-credit"></a>More Reading / Extra Credit<a aria-hidden="true" tabindex="-1" class="hash-link" href="#more-reading--extra-credit" title="Direct link to heading">#</a></h2><ol><li><a href="http://browniefed.com/react-native-animation-book/" target="_blank" rel="noopener noreferrer">This gitbook</a> is a great resource to learn more about Animated after you have read the React Native docs.</li><li>The actual Twitter animation seems to speed up the mask reveal towards the end. Try modifying the loader to use a different easing function (or a spring!) to better match that behavior.</li><li>The current end-scale of the mask is hard coded and likely won’t reveal the entire app on a tablet. Calculating the end scale based on screen size and image size would be an awesome PR.</li></ol></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2018/01/09/react-native-monthly-6">React Native Monthly #6</a></h2><div class="margin-vert--md"><time datetime="2018-01-09T00:00:00.000Z" class="blogPostDate_BxXe">January 9, 2018  · 4 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://twitter.com/TomislavTenodi" target="_blank" rel="noreferrer noopener"><img src="https://pbs.twimg.com/profile_images/877237660225609729/bKFDwfAq.jpg" alt="Tomislav Tenodi"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://twitter.com/TomislavTenodi" target="_blank" rel="noreferrer noopener">Tomislav Tenodi</a></h4><small class="avatar__subtitle">Founder at Speck</small></div></div></header><section class="markdown"><p>The React Native monthly meeting is still going strong! Make sure to check a note on the bottom of this post for the next sessions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="expo"></a>Expo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#expo" title="Direct link to heading">#</a></h3><ul><li>Congratulations to <a href="https://github.com/dabbott" target="_blank" rel="noopener noreferrer">Devin Abbott</a> and <a href="https://twitter.com/hdjirdeh" target="_blank" rel="noopener noreferrer">Houssein Djirdeh</a> on their pre-release of the &quot;Full Stack React Native&quot; book! It walks you through learning React Native by building several small apps. You can try those apps out on <a href="https://www.fullstackreact.com/react-native/" target="_blank" rel="noopener noreferrer">https://www.fullstackreact.com/react-native/</a> before buying the book.</li><li>Released a first (experimental) version of <a href="https://github.com/react-community/reason-react-native-scripts" target="_blank" rel="noopener noreferrer">reason-react-native-scripts</a> to help people to easily try out <a href="https://reasonml.github.io/" target="_blank" rel="noopener noreferrer">ReasonML</a>.</li><li>Expo SDK 24 is <a href="https://blog.expo.io/expo-sdk-v24-0-0-is-now-available-bfcac3b50d51" target="_blank" rel="noopener noreferrer">released</a>! It uses <a href="https://github.com/facebook/react-native/releases/tag/v0.51.0" target="_blank" rel="noopener noreferrer">React Native 0.51</a> and includes a bunch of new features and improvements: bundling images in standalone apps (no need to cache on first load!), image manipulation API (crop, resize, rotate, flip), face detection API, new release channel features (set the active release for a given channel and rollback), web dashboard to track standalone app builds, and a fix longstanding bug with OpenGL Android implementation and the Android multi-tasker, just to name a few things.</li><li>We are allocating more resources to React Navigation starting this January. We strongly believe that it is both possible and desirable to build React Native navigation with just React components and primitives like Animated and <code>react-native-gesture-handler</code> and we’re really excited about some of the improvements we have planned. If you&#x27;re looking to contribute to the community, check out <a href="https://github.com/react-community/react-native-maps" target="_blank" rel="noopener noreferrer">react-native-maps</a> and <a href="https://github.com/react-native-community/react-native-svg" target="_blank" rel="noopener noreferrer">react-native-svg</a>, which could both use some help!</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="infinite-red"></a>Infinite Red<a aria-hidden="true" tabindex="-1" class="hash-link" href="#infinite-red" title="Direct link to heading">#</a></h3><ul><li>We have our Keynote speakers for <a href="https://infinite.red/ChainReactConf" target="_blank" rel="noopener noreferrer">Chain React conf</a>: <a href="https://twitter.com/kentcdodds" target="_blank" rel="noopener noreferrer">Kent C. Dodds</a> and <a href="https://twitter.com/ladyleet" target="_blank" rel="noopener noreferrer">Tracy Lee</a>. We will be opening CFP very soon.</li><li><a href="http://community.infinite.red/" target="_blank" rel="noopener noreferrer">Community chat</a> now at 1600 people.</li><li><a href="http://reactnative.cc/" target="_blank" rel="noopener noreferrer">React Native Newsletter</a> now at 8500 subscribers.</li><li>Currently researching best practice for making RN crash resistant, reports to follow.</li><li>Adding ability to report from <a href="https://shift.infinite.red/effortless-environment-reports-d129d53eb405" target="_blank" rel="noopener noreferrer">Solidarity</a>.</li><li>Published a HOW-TO for releasing on <a href="https://shift.infinite.red/simple-react-native-android-releases-319dc5e29605" target="_blank" rel="noopener noreferrer">React Native and Android</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="microsoft"></a>Microsoft<a aria-hidden="true" tabindex="-1" class="hash-link" href="#microsoft" title="Direct link to heading">#</a></h3><ul><li>A <a href="https://github.com/Microsoft/react-native-windows/pull/1419" target="_blank" rel="noopener noreferrer">pull request</a> has been started to migrate the core React Native Windows bridge to .NET Standard, making it effectively OS-agnostic. The hope is that many other .NET Core platforms can extend the bridge with their own threading models, JavaScript runtimes, and UIManagers (think JavaScriptCore, Xamarin.Mac, Linux Gtk#, and Samsung Tizen options).</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="wix"></a>Wix<a aria-hidden="true" tabindex="-1" class="hash-link" href="#wix" title="Direct link to heading">#</a></h3><ul><li><a href="https://github.com/wix/detox" target="_blank" rel="noopener noreferrer">Detox</a><ul><li>In order for us to scale with E2E tests, we want to minimize time spent on CI, we are working on parallelization support for Detox.</li><li>Submitted a <a href="https://github.com/facebook/react-native/pull/16948" target="_blank" rel="noopener noreferrer">pull request</a> to enable support for custom flavor builds, to better support mocking on E2E.</li></ul></li><li><a href="https://github.com/wix/DetoxInstruments" target="_blank" rel="noopener noreferrer">DetoxInstruments</a><ul><li>Working on the killer feature of DetoxInstruments proves to be a very challenging task, taking JavaScript backtrace at any given time requires a custom JSCore implementation to support JS thread suspension. Testing the profiler internally on Wix’s app revealed interesting insights about the JS thread.</li><li>The project is still not stable enough for general use but is actively worked on, and we hope to announce it soon.</li></ul></li><li><a href="https://github.com/wix/react-native-navigation" target="_blank" rel="noopener noreferrer">React Native Navigation</a><ul><li>V2 development pace has been increased substantially, up until now, we only had 1 developer working on it 20% of his time, we now have 3 developers working on it full time!</li></ul></li><li>Android Performance<ul><li>Replacing the old JSCore bundled in RN with its newest version (tip of webkitGTK project, with custom JIT configuration) produced 40% performance increase on the JS thread. Next up is compiling a 64bit version of it. This effort is based on <a href="https://github.com/SoftwareMansion/jsc-android-buildscripts" target="_blank" rel="noopener noreferrer">JSC build scripts for Android</a>. Follow its current status <a href="https://github.com/DanielZlotin/jsc-android-buildscripts/tree/tip" target="_blank" rel="noopener noreferrer">here</a>.</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="next-sessions"></a>Next sessions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-sessions" title="Direct link to heading">#</a></h2><p>There&#x27;s been some discussion on re-purposing this meeting to discuss a single and specific topic (e.g. navigation, moving React Native modules into separate repos, documentation, ...). That way we feel we can contribute the best to React Native community. It might take place in the next meeting session. Feel free to tweet what you&#x27;d like to see covered as a topic.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2017/11/06/react-native-monthly-5">React Native Monthly #5</a></h2><div class="margin-vert--md"><time datetime="2017-11-06T00:00:00.000Z" class="blogPostDate_BxXe">November 6, 2017  · 4 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/tenodi" target="_blank" rel="noreferrer noopener"><img src="https://pbs.twimg.com/profile_images/877237660225609729/bKFDwfAq.jpg" alt="Tomislav Tenodi"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/tenodi" target="_blank" rel="noreferrer noopener">Tomislav Tenodi</a></h4><small class="avatar__subtitle">Founder at Speck</small></div></div></header><section class="markdown"><p>The React Native monthly meeting continues! Let&#x27;s see what our teams are up to.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="callstack"></a>Callstack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#callstack" title="Direct link to heading">#</a></h3><ul><li>We’ve been working on React Native CI. Most importantly, we have migrated from Travis to Circle, leaving React Native with a single, unified CI pipeline.</li><li>We’ve organised <a href="https://blog.callstack.io/announcing-hacktoberfest-7313ea5ccf4f" target="_blank" rel="noopener noreferrer">Hacktoberfest - React Native edition</a> where, together with attendees, we tried to submit many pull requests to open source projects.</li><li>We keep working on <a href="https://github.com/callstack/haul" target="_blank" rel="noopener noreferrer">Haul</a>. Last month, we have submitted two new releases, including Webpack 3 support. We plan to add <a href="https://github.com/react-community/create-react-native-app" target="_blank" rel="noopener noreferrer">CRNA</a> and <a href="https://github.com/expo/expo" target="_blank" rel="noopener noreferrer">Expo</a> support as well as work on better HMR. Our roadmap is public on the issue tracker. If you would like to suggest improvements or give feedback, let us know!</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="expo"></a>Expo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#expo" title="Direct link to heading">#</a></h3><ul><li>Released <a href="https://blog.expo.io/expo-sdk-v22-0-0-is-now-available-7745bfe97fc6" target="_blank" rel="noopener noreferrer">Expo SDK 22</a> (using React Native 0.49) and updated <a href="https://github.com/react-community/create-react-native-app" target="_blank" rel="noopener noreferrer">CRNA</a> for it.<ul><li>Includes improved splash screen API, basic ARKit support, “DeviceMotion” API, SFAuthenticationSession support on iOS11, and <a href="https://blog.expo.io/expo-sdk-v22-0-0-is-now-available-7745bfe97fc6" target="_blank" rel="noopener noreferrer">more</a>.</li></ul></li><li>Your <a href="https://snack.expo.io" target="_blank" rel="noopener noreferrer">snacks</a> can now have multiple JavaScript files and you can upload images and other assets by just dragging them into the editor.</li><li>Contribute to <a href="https://github.com/react-community/react-navigation" target="_blank" rel="noopener noreferrer">react-navigation</a> to add support for iPhone X.</li><li>Focus our attention on rough edges when building large applications with Expo. For example:<ul><li>First-class support for deploying to multiple environments: staging, production, and arbitrary channels. Channels will support rolling back and setting the active release for a given channel. Let us know if you want to be an early tester, <a href="https://twitter.com/expo_io" target="_blank" rel="noopener noreferrer">@expo_io</a>.</li><li>We are also working on improving our standalone app building infrastructure and adding support for bundling images and other non-code assets in standalone app builds while keeping the ability to update assets over the air.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="facebook"></a>Facebook<a aria-hidden="true" tabindex="-1" class="hash-link" href="#facebook" title="Direct link to heading">#</a></h3><ul><li>Better RTL support:<ul><li>We’re introducing a number of direction-aware styles.<ul><li>Position:<ul><li>(left|right) → (start|end)</li></ul></li><li>Margin:<ul><li>margin(Left|Right) → margin(Start|End)</li></ul></li><li>Padding:<ul><li>padding(Left|Right) → padding(Start|End)</li></ul></li><li>Border:<ul><li>borderTop(Left|Right)Radius → borderTop(Start|End)Radius</li><li>borderBottom(Left|Right)Radius → borderBottom(Start|End)Radius</li><li>border(Left|Right)Width → border(Start|End)Width</li><li>border(Left|Right)Color → border(Start|End)Color</li></ul></li></ul></li><li>The meaning of “left” and “right” were swapped in RTL for position, margin, padding, and border styles. Within a few months, we’re going to remove this behaviour and make “left” always mean “left,” and “right” always mean “right”. The breaking changes are hidden under a flag. Use <code>I18nManager.swapLeftAndRightInRTL(false)</code> in your React Native components to opt into them.</li></ul></li><li>Working on <a href="https://github.com/facebook/flow" target="_blank" rel="noopener noreferrer">Flow</a> typing our internal native modules and using those to generate interfaces in Java and protocols in ObjC that the native implementations must implement. We hope this codegen becomes open source next year, at the earliest.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="infinite-red"></a>Infinite Red<a aria-hidden="true" tabindex="-1" class="hash-link" href="#infinite-red" title="Direct link to heading">#</a></h3><ul><li>New OSS tool for helping React Native and other projects. More <a href="https://shift.infinite.red/solidarity-the-cli-for-developer-sanity-672fa81b98e9" target="_blank" rel="noopener noreferrer">here</a>.</li><li>Revamping <a href="https://github.com/infinitered/ignite" target="_blank" rel="noopener noreferrer">Ignite</a> for a new boilerplate release (Code name: Bowser)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="shoutem"></a>Shoutem<a aria-hidden="true" tabindex="-1" class="hash-link" href="#shoutem" title="Direct link to heading">#</a></h3><ul><li>Improving the development flow on Shoutem. We want to streamline the process from creating an app to first custom screen and make it really easy, thus lowering the barrier for new React Native developers. Prepared a few workshops to test out new features. We also improved <a href="https://github.com/shoutem/cli" target="_blank" rel="noopener noreferrer">Shoutem CLI</a> to support new flows.</li><li><a href="https://github.com/shoutem/ui" target="_blank" rel="noopener noreferrer">Shoutem UI</a> received a few component improvements and bugfixes. We also checked compatibility with latest React Native versions.</li><li>Shoutem platform received a few notable updates, new integrations are available as part of the <a href="https://github.com/shoutem/extensions" target="_blank" rel="noopener noreferrer">open-source extensions project</a>. We are really excited to see active development on Shoutem extensions from other developers. We actively contact and offer advice and guidance about their extensions.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="next-session"></a>Next session<a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-session" title="Direct link to heading">#</a></h2><p>The next session is scheduled for Wednesday 6, December 2017. Feel free to ping me <a href="https://twitter.com/TomislavTenodi" target="_blank" rel="noopener noreferrer">on Twitter</a> if you have any suggestion on how we should improve the output of the meeting.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2017/09/21/react-native-monthly-4">React Native Monthly #4</a></h2><div class="margin-vert--md"><time datetime="2017-09-21T00:00:00.000Z" class="blogPostDate_BxXe">September 21, 2017  · 3 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/grabbou" target="_blank" rel="noreferrer noopener"><img src="https://pbs.twimg.com/profile_images/988860423897313281/L9ErG_lr_400x400.jpg" alt="Mike Grabowski"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/grabbou" target="_blank" rel="noreferrer noopener">Mike Grabowski</a></h4><small class="avatar__subtitle">CTO at Callstack</small></div></div></header><section class="markdown"><p>The React Native monthly meeting continues! Here are the notes from each team:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="callstack"></a>Callstack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#callstack" title="Direct link to heading">#</a></h3><ul><li><a href="https://react-native.eu" target="_blank" rel="noopener noreferrer">React Native EU</a> is over. More than 300 participants from 33 countries have visited Wroclaw. Talks can be found <a href="https://www.youtube.com/channel/UCUNE_g1mQPuyW975WjgjYxA/videos" target="_blank" rel="noopener noreferrer">on Youtube</a>.</li><li>We are slowly getting back to our open source schedule after the conference. One thing worth mentioning is that we are working on a next release of <a href="https://github.com/callstack/react-native-opentok" target="_blank" rel="noopener noreferrer">react-native-opentok</a> that fixes most of the existing issues.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="geekyants"></a>GeekyAnts<a aria-hidden="true" tabindex="-1" class="hash-link" href="#geekyants" title="Direct link to heading">#</a></h3><p>Trying to lower the entry barrier for the developers embracing React Native with the following things:</p><ul><li>Announced <a href="https://builderx.io/" target="_blank" rel="noopener noreferrer">BuilderX.io</a> at <a href="https://react-native.eu" target="_blank" rel="noopener noreferrer">React Native EU</a>. BuilderX is a design tool that directly works with JavaScript files (only React Native is supported at the moment) to generate beautiful, readable, and editable code.</li><li>Launched <a href="http://reactnativeseed.com/" target="_blank" rel="noopener noreferrer">ReactNativeSeed.com</a> which provides a set of boilerplates for your next React Native project. It comes with a variety of options that include TypeScript &amp; Flow for data-types, MobX, Redux, and mobx-state-tree for state-management with CRNA and plain React-Native as the stack.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="expo"></a>Expo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#expo" title="Direct link to heading">#</a></h3><ul><li>Will release SDK 21 shortly, which adds support for react-native 0.48.3 and a bunch of bugfixes/reliability improvements/new features in the Expo SDK, including video recording, a new splash screen API, support for <code>react-native-gesture-handler</code>, and improved error handling.</li><li>Re: <a href="https://github.com/kmagiera/react-native-gesture-handler" target="_blank" rel="noopener noreferrer">react-native-gesture-handler</a>, <a href="https://github.com/kmagiera" target="_blank" rel="noopener noreferrer">Krzysztof Magiera</a> of <a href="http://swmansion.com/" target="_blank" rel="noopener noreferrer">Software Mansion</a> continues pushing this forward and we&#x27;ve been helping him with testing it and funding part of his development time. Having this integrated in Expo in SDK21 will allow people to play with it easily in Snack, so we&#x27;re excited to see what people come up with.</li><li>Re: improved error logging / handling - see <a href="https://gist.github.com/brentvatne/00407710a854627aa021fdf90490b958" target="_blank" rel="noopener noreferrer">this gist of an internal Expo PR</a> for details on logging, (in particular, &quot;Problem 2&quot;), and <a href="https://github.com/expo/xdl/commit/1d62eca293dfb867fc0afc920c3dad94b7209987" target="_blank" rel="noopener noreferrer">this commit</a> for a change that handles failed attempts to import npm standard library modules. There is plenty of opportunity to improve error messages upstream in React Native in this way and we will work on follow up upstream PRs. It would be great for the community to get involved too.</li><li><a href="http://native.directory/" target="_blank" rel="noopener noreferrer">native.directory</a> continues to grow, you can add your projects from <a href="https://github.com/react-community/native-directory" target="_blank" rel="noopener noreferrer">the Github repo</a>.</li><li>Visit hackathons around North America, including <a href="http://pennapps.com/" target="_blank" rel="noopener noreferrer">PennApps</a>, <a href="http://hackthenorth.com/" target="_blank" rel="noopener noreferrer">Hack The North</a>, <a href="https://hackmit.org/" target="_blank" rel="noopener noreferrer">HackMIT</a>, and soon <a href="https://mhacks.org/" target="_blank" rel="noopener noreferrer">MHacks</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="facebook"></a>Facebook<a aria-hidden="true" tabindex="-1" class="hash-link" href="#facebook" title="Direct link to heading">#</a></h3><ul><li>Working on improving <code>&lt;Text&gt;</code> and <code>&lt;TextInput&gt;</code> components on Android. (Native auto-growing for <code>&lt;TextInput&gt;</code>; deeply nested <code>&lt;Text&gt;</code> components layout issues; better code structure; performance optimizations).</li><li>We&#x27;re still looking for additional contributors who would like to help triage issues and pull requests.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="microsoft"></a>Microsoft<a aria-hidden="true" tabindex="-1" class="hash-link" href="#microsoft" title="Direct link to heading">#</a></h3><ul><li>Released Code Signing feature for CodePush. React Native developers are now able to sign their application bundles in CodePush. The announcement can be found <a href="http://microsoft.github.io/code-push/articles/CodeSigningAnnouncement.html" target="_blank" rel="noopener noreferrer">here</a></li><li>Working on completing integration of CodePush to Mobile Center. Considering test/crash integration as well.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="next-session"></a>Next session<a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-session" title="Direct link to heading">#</a></h2><p>The next session is scheduled for Wednesday 10, October 2017. As this was only our fourth meeting, we&#x27;d like to know how do these notes benefit the React Native community. Feel free to ping me <a href="https://twitter.com/grabbou" target="_blank" rel="noopener noreferrer">on Twitter</a> if you have any suggestion on how we should improve the output of the meeting.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2017/08/30/react-native-monthly-3">React Native Monthly #3</a></h2><div class="margin-vert--md"><time datetime="2017-08-30T00:00:00.000Z" class="blogPostDate_BxXe">August 30, 2017  · 5 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/grabbou" target="_blank" rel="noreferrer noopener"><img src="https://pbs.twimg.com/profile_images/988860423897313281/L9ErG_lr_400x400.jpg" alt="Mike Grabowski"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/grabbou" target="_blank" rel="noreferrer noopener">Mike Grabowski</a></h4><small class="avatar__subtitle">CTO at Callstack</small></div></div></header><section class="markdown"><p>The React Native monthly meeting continues! This month&#x27;s meeting was a bit shorter as most of our teams were busy shipping. Next month, we are at <a href="https://react-native.eu/" target="_blank" rel="noopener noreferrer">React Native EU</a> conference in Wroclaw, Poland. Make sure to grab a ticket and see you there in person! Meanwhile, let&#x27;s see what our teams are up to.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="teams"></a>Teams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#teams" title="Direct link to heading">#</a></h2><p>On this third meeting, we had 5 teams join us:</p><ul><li><a href="https://github.com/callstack" target="_blank" rel="noopener noreferrer">Callstack</a></li><li><a href="https://github.com/expo" target="_blank" rel="noopener noreferrer">Expo</a></li><li><a href="https://github.com/facebook" target="_blank" rel="noopener noreferrer">Facebook</a></li><li><a href="https://github.com/microsoft" target="_blank" rel="noopener noreferrer">Microsoft</a></li><li><a href="https://github.com/shoutem" target="_blank" rel="noopener noreferrer">Shoutem</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="notes"></a>Notes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#notes" title="Direct link to heading">#</a></h2><p>Here are the notes from each team:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="callstack"></a>Callstack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#callstack" title="Direct link to heading">#</a></h3><ul><li>Recently open sourced <a href="https://github.com/callstack-io/react-native-material-palette" target="_blank" rel="noopener noreferrer"><code>react-native-material-palette</code></a>. It extracts prominent colors from images to help you create visually engaging apps. It&#x27;s Android only at the moment, but we are looking into adding support for iOS in the future.</li><li>We have landed HMR support into <a href="https://github.com/callstack-io/haul" target="_blank" rel="noopener noreferrer"><code>haul</code></a> and a bunch of other, cool stuff! Check out latest releases.</li><li>React Native EU 2017 is coming! Next month is all about React Native and Poland! Make sure to grab last tickets available <a href="https://react-native.eu/" target="_blank" rel="noopener noreferrer">here</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="expo"></a>Expo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#expo" title="Direct link to heading">#</a></h3><ul><li>Released support for installing npm packages on <a href="https://snack.expo.io" target="_blank" rel="noopener noreferrer">Snack</a>. Usual Expo restrictions apply -- packages can&#x27;t depend on custom native APIs that aren&#x27;t already included in Expo. We are also working on supporting multiple files and uploading assets in Snack. <a href="https://github.com/satya164" target="_blank" rel="noopener noreferrer">Satyajit</a> will talk about Snack at <a href="https://react-native.eu/" target="_blank" rel="noopener noreferrer">React Native Europe</a>.</li><li>Released SDK20 with camera, payments, secure storage, magnetometer, pause/resume fs downloads, and improved splash/loading screen.</li><li>Continuing to work with <a href="https://github.com/kmagiera" target="_blank" rel="noopener noreferrer">Krzysztof</a> on <a href="https://github.com/kmagiera/react-native-gesture-handler" target="_blank" rel="noopener noreferrer">react-native-gesture-handler</a>. Please give it a try, rebuild some gesture that you have previously built using PanResponder or native gesture recognizers and let us know what issues you encounter.</li><li>Experimenting with JSC debugging protocol, working on a bunch of feature requests on <a href="https://expo.canny.io/feature-requests" target="_blank" rel="noopener noreferrer">Canny</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="facebook"></a>Facebook<a aria-hidden="true" tabindex="-1" class="hash-link" href="#facebook" title="Direct link to heading">#</a></h3><ul><li>Last month we discussed management of the GitHub issue tracker and that we would try to make improvements to address the maintainability of the project.</li><li>Currently, the number of open issues is holding steady at around 600, and it seems like it may stay that way for a while. In the past month, we have closed 690 issues due to lack of activity (defined as no comments in the last 60 days). Out of those 690 issues, 58 were re-opened for a variety of reasons (a maintainer committed to providing a fix, or a contributor made a great case for keeping the issue open).</li><li>We plan to continue with the automated closing of stale issues for the foreseeable future. We’d like to be in a state where every impactful issue opened in the tracker is acted upon, but we’re not there yet. We need all the help we can from maintainers to triage issues and make sure we don&#x27;t miss issues that introduce regressions or introduce breaking changes, especially those that affect newly created projects. People interested in helping out can use the Facebook GitHub Bot to triage issues and pull requests. The new Maintainers Guide contains more information on triage and use of the GitHub Bot. Please add yourself to the <a href="https://github.com/facebook/react-native/blob/master/bots/IssueCommands.txt" target="_blank" rel="noopener noreferrer">issue task force</a> and encourage other active community members to do the same!</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="microsoft"></a>Microsoft<a aria-hidden="true" tabindex="-1" class="hash-link" href="#microsoft" title="Direct link to heading">#</a></h3><ul><li>The new Skype app is built on top of React Native in order to facilitate sharing as much code between platforms as possible. The React Native-based Skype app is currently available in the Android and iOS app stores.</li><li>While building the Skype app on React Native, we send pull requests to React Native in order to address bugs and missing features that we come across. So far, we&#x27;ve gotten about <a href="https://github.com/facebook/react-native/pulls?utf8=%E2%9C%93&amp;q=is%3Apr%20author%3Arigdern%20" target="_blank" rel="noopener noreferrer">70 pull requests merged</a>.</li><li>React Native enabled us to power both the Android and iOS Skype apps from the same codebase. We also want to use that codebase to power the Skype web app. To help us achieve that goal, we built and open sourced a thin layer on top of React/React Native called <a href="https://microsoft.github.io/reactxp/blog/2017/04/06/introducing-reactxp.html" target="_blank" rel="noopener noreferrer">ReactXP</a>. ReactXP provides a set of cross platform components that get mapped to React Native when targeting iOS/Android and to react-dom when targeting the web. ReactXP&#x27;s goals are similar to another open source library called React Native for Web. There&#x27;s a brief description of how the approaches of these libraries differ in the <a href="https://microsoft.github.io/reactxp/docs/faq.html" target="_blank" rel="noopener noreferrer">ReactXP FAQ</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="shoutem"></a>Shoutem<a aria-hidden="true" tabindex="-1" class="hash-link" href="#shoutem" title="Direct link to heading">#</a></h3><ul><li>We are continuing our efforts on improving and simplifying the developer experience when building apps using <a href="https://shoutem.github.io/" target="_blank" rel="noopener noreferrer">Shoutem</a>.</li><li>Started migrating all our apps to react-navigation, but we ended postponing this until a more stable version is released, or one of the native navigation solutions becomes stable.</li><li>Updating all our <a href="https://github.com/shoutem/extensions" target="_blank" rel="noopener noreferrer">extensions</a> and most of our open source libraries (<a href="https://github.com/shoutem/animation" target="_blank" rel="noopener noreferrer">animation</a>, <a href="https://github.com/shoutem/theme" target="_blank" rel="noopener noreferrer">theme</a>, <a href="https://github.com/shoutem/ui" target="_blank" rel="noopener noreferrer">ui</a>) to React Native 0.47.1.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="next-session"></a>Next session<a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-session" title="Direct link to heading">#</a></h2><p>The next session is scheduled for Wednesday 13, September 2017. As this was only our third meeting, we&#x27;d like to know how do these notes benefit the React Native community. Feel free to ping me <a href="https://twitter.com/grabbou" target="_blank" rel="noopener noreferrer">on Twitter</a> if you have any suggestion on how we should improve the output of the meeting.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2017/08/07/react-native-performance-in-marketplace">React Native Performance in Marketplace</a></h2><div class="margin-vert--md"><time datetime="2017-08-07T00:00:00.000Z" class="blogPostDate_BxXe">August 7, 2017  · 5 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name"><a href="https://www.facebook.com/aaronechiu" target="_blank" rel="noreferrer noopener">Aaron Chiu</a></h4><small class="avatar__subtitle">Software Engineer at Facebook</small></div></div></header><section class="markdown"><p>React Native is used in multiple places across multiple apps in the Facebook family including a top level tab in the main Facebook apps. Our focus for this post is a highly visible product, <a href="https://newsroom.fb.com/news/2016/10/introducing-marketplace-buy-and-sell-with-your-local-community/" target="_blank" rel="noopener noreferrer">Marketplace</a>. It is available in a dozen or so countries and enables users to discover products and services provided by other users.</p><p>In the first half of 2017, through the joint effort of the Relay Team, the Marketplace team, the Mobile JS Platform team, and the React Native team, we cut Marketplace Time to Interaction (TTI) in half for Android <a href="https://code.facebook.com/posts/307478339448736/year-class-a-classification-system-for-android/" target="_blank" rel="noopener noreferrer">Year Class 2010-11 devices</a>. Facebook has historically considered these devices as low-end Android devices, and they have the slowest TTIs on any platform or device type.</p><p>A typical React Native startup looks something like this:</p><p><img src="/assets/images/RNPerformanceStartup-1fd20cca7c74d0ee7a15fe9e8199610f.png"></p><blockquote><p>Disclaimer: ratios aren&#x27;t representative and will vary depending on how React Native is configured and used.</p></blockquote><p>We first initialize the React Native core (aka the “Bridge”) before running the product specific JavaScript which determines what native views React Native will render in the Native Processing Time.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="a-different-approach"></a>A different approach<a aria-hidden="true" tabindex="-1" class="hash-link" href="#a-different-approach" title="Direct link to heading">#</a></h3><p>One of the earlier mistakes that we made was to let <a href="https://code.facebook.com/posts/747457662026706/performance-instrumentation-for-android-apps/" target="_blank" rel="noopener noreferrer">Systrace and CTScan</a> drive our performance efforts. These tools helped us find a lot of low-hanging fruit in 2016, but we discovered that both Systrace and CTScan are <strong>not representative of production scenarios</strong> and cannot emulate what happens in the wild. Ratios of time spent in the breakdowns are often incorrect and, wildly off-base at times. At the extreme, some things that we expected to take a few milliseconds actually take hundreds or thousands of milliseconds. That said, CTScan is useful and we&#x27;ve found it catches a third of regressions before they hit production.</p><p>On Android, we attribute the shortcomings of these tools to the fact that 1) React Native is a multithreaded framework, 2) Marketplace is co-located with a multitude of complex views such as Newsfeed and other top-level tabs, and 3) computation times vary wildly. Thus, this half, we let production measurements and breakdowns drive almost all of our decision making and prioritization.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="down-the-path-of-production-instrumentation"></a>Down the path of production instrumentation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#down-the-path-of-production-instrumentation" title="Direct link to heading">#</a></h3><p>Instrumenting production may sound simple on the surface, but it turned out to be quite a complex process. It took multiple iteration cycles of 2-3 weeks each; due to the latency of landing a commit in master, to pushing the app to the Play Store, to gathering sufficient production samples to have confidence in our work. Each iteration cycle involved discovering if our breakdowns were accurate, if they had the right level of granularity, and if they properly added up to the whole time span. We could not rely on alpha and beta releases because they are not representative of the general population. In essence, we very tediously built a very accurate production trace based on the aggregate of millions of samples.</p><p>One of the reasons we meticulously verified that every millisecond in breakdowns properly added up to their parent metrics was that we realized early on there were gaps in our instrumentation. It turned out that our initial breakdowns did not account for stalls caused by thread jumps. Thread jumps themselves aren&#x27;t expensive, but thread jumps to busy threads already doing work are very expensive. We eventually reproduced these blockages locally by sprinkling <code>Thread.sleep()</code> calls at the right moments, and we managed to fix them by:</p><ol><li>removing our dependency on AsyncTask,</li><li>undoing the forced initialization of ReactContext and NativeModules on the UI thread, and</li><li>removing the dependency on measuring the ReactRootView at initialization time.</li></ol><p>Together, removing these thread blockage issues reduced the startup time by over 25%.</p><p>Production metrics also challenged some of our prior assumptions. For example, we used to pre-load many JavaScript modules on the startup path under the assumption that co-locating modules in one bundle would reduce their initialization cost. However, the cost of pre-loading and co-locating these modules far outweighed the benefits. By re-configuring our inline require blacklists and removing JavaScript modules from the startup path, we were able to avoid loading unnecessary modules such as Relay Classic (when only <a href="https://relay.dev/docs/new-in-relay-modern" target="_blank" rel="noopener noreferrer">Relay Modern</a> was necessary). Today, our <code>RUN_JS_BUNDLE</code> breakdown is over 75% faster.</p><p>We also found wins by investigating product-specific native modules. For example, by lazily injecting a native module&#x27;s dependencies, we reduced that native module&#x27;s cost by 98%. By removing the contention of Marketplace startup with other products, we reduced startup by an equivalent interval.</p><p>The best part is that many of these improvements are broadly applicable to all screens built with React Native.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="conclusion"></a>Conclusion<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>People assume that React Native startup performance problems are caused by JavaScript being slow or exceedingly high network times. While speeding up things like JavaScript would bring down TTI by a non-trivial sum, each of these contribute a much smaller percentage of TTI than was previously believed.</p><p>The lesson so far has been to <em>measure, measure, measure!</em> Some wins come from moving run-time costs to build time, such as Relay Modern and <a href="https://github.com/facebook/react-native/commit/797ca6c219b2a44f88f10c61d91e8cc21e2f306e" target="_blank" rel="noopener noreferrer">Lazy NativeModules</a>. Other wins come from avoiding work by being smarter about parallelizing code or removing dead code. And some wins come from large architectural changes to React Native, such as cleaning up thread blockages. There is no grand solution to performance, and longer-term performance wins will come from incremental instrumentation and improvements. Do not let cognitive bias influence your decisions. Instead, carefully gather and interpret production data to guide future work.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="future-plans"></a>Future plans<a aria-hidden="true" tabindex="-1" class="hash-link" href="#future-plans" title="Direct link to heading">#</a></h2><p>In the long term, we want Marketplace TTI to be comparable to similar products built with Native, and, in general, have React Native performance on par with native performance. Further more, although this half we drastically reduced the bridge startup cost by about 80%, we plan to bring the cost of the React Native bridge close to zero via projects like <a href="https://prepack.io/" target="_blank" rel="noopener noreferrer">Prepack</a> and more build time processing.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2017/07/28/react-native-monthly-2">React Native Monthly #2</a></h2><div class="margin-vert--md"><time datetime="2017-07-28T00:00:00.000Z" class="blogPostDate_BxXe">July 28, 2017  · 8 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/tenodi" target="_blank" rel="noreferrer noopener"><img src="https://pbs.twimg.com/profile_images/877237660225609729/bKFDwfAq.jpg" alt="Tomislav Tenodi"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/tenodi" target="_blank" rel="noreferrer noopener">Tomislav Tenodi</a></h4><small class="avatar__subtitle">Product Manager at Shoutem</small></div></div></header><section class="markdown"><p>The React Native monthly meeting continues! On this session, we were joined by <a href="https://infinite.red/" target="_blank" rel="noopener noreferrer">Infinite Red</a>, great minds behind <a href="https://infinite.red/ChainReactConf" target="_blank" rel="noopener noreferrer">Chain React, the React Native Conference</a>. As most of the people here were presenting talks at Chain React, we pushed the meeting to a week later. Talks from the conference have been <a href="https://www.youtube.com/playlist?list=PLFHvL21g9bk3RxJ1Ut5nR_uTZFVOxu522" target="_blank" rel="noopener noreferrer">posted online</a> and I encourage you to check them out. So, let&#x27;s see what our teams are up to.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="teams"></a>Teams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#teams" title="Direct link to heading">#</a></h2><p>On this second meeting, we had 9 teams join us:</p><ul><li><a href="https://github.com/airbnb" target="_blank" rel="noopener noreferrer">Airbnb</a></li><li><a href="https://github.com/callstack-io" target="_blank" rel="noopener noreferrer">Callstack</a></li><li><a href="https://github.com/expo" target="_blank" rel="noopener noreferrer">Expo</a></li><li><a href="https://github.com/facebook" target="_blank" rel="noopener noreferrer">Facebook</a></li><li><a href="https://github.com/GeekyAnts" target="_blank" rel="noopener noreferrer">GeekyAnts</a></li><li><a href="https://github.com/infinitered" target="_blank" rel="noopener noreferrer">Infinite Red</a></li><li><a href="https://github.com/microsoft" target="_blank" rel="noopener noreferrer">Microsoft</a></li><li><a href="https://github.com/shoutem" target="_blank" rel="noopener noreferrer">Shoutem</a></li><li><a href="https://github.com/wix" target="_blank" rel="noopener noreferrer">Wix</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="notes"></a>Notes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#notes" title="Direct link to heading">#</a></h2><p>Here are the notes from each team:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="airbnb"></a>Airbnb<a aria-hidden="true" tabindex="-1" class="hash-link" href="#airbnb" title="Direct link to heading">#</a></h3><ul><li>Check out the <a href="https://github.com/airbnb" target="_blank" rel="noopener noreferrer">Airbnb repository</a> for React Native related projects.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="callstack"></a>Callstack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#callstack" title="Direct link to heading">#</a></h3><ul><li><a href="https://github.com/grabbou" target="_blank" rel="noopener noreferrer">Mike Grabowski</a> has been managing React Native&#x27;s monthly releases as always, including a few betas that were pushed out. In particular, working on getting a v0.43.5 build published to npm since it unblocks Windows users!</li><li>Slow but consistent work is happening on <a href="https://github.com/callstack-io/haul" target="_blank" rel="noopener noreferrer">Haul</a>. There is a pull request that adds HMR, and other improvements have shipped. Recently got a few industry leaders to adopt it. Possibly planning to start a full-time paid work in that area.</li><li><a href="https://twitter.com/thymikee" target="_blank" rel="noopener noreferrer">Michał Pierzchała</a> from the <a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer">Jest</a> team has joined us at Callstack this month. He will help maintain <a href="https://github.com/callstack-io/haul" target="_blank" rel="noopener noreferrer">Haul</a> and possibly work on <a href="https://github.com/facebook/metro" target="_blank" rel="noopener noreferrer">Metro Bundler</a> and <a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer">Jest</a>.</li><li><a href="https://twitter.com/satya164" target="_blank" rel="noopener noreferrer">Satyajit Sahoo</a> is now with us, yay!</li><li>Got a bunch of cool stuff coming up from our OSS department. In particular, working on bringing Material Palette API to React Native. Planning to finally release our native iOS kit which is aimed to provide 1:1 look &amp; feel of native components.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="expo"></a>Expo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#expo" title="Direct link to heading">#</a></h3><ul><li>Recently launched <a href="https://native.directory" target="_blank" rel="noopener noreferrer">Native Directory</a> to help with discoverability and evaluation of libraries in React Native ecosystem. The problem: lots of libraries, hard to test, need to manually apply heuristics and not immediately obvious which ones are just the best ones that you should use. It&#x27;s also hard to know if something is compatible with CRNA/Expo. So Native Directory tries to solve these problems. Check it out and <a href="https://github.com/react-community/native-directory" target="_blank" rel="noopener noreferrer">add your library</a> to it. The list of libraries is in <a href="https://github.com/react-community/native-directory/blob/master/react-native-libraries.json" target="_blank" rel="noopener noreferrer">here</a>. This is just our first pass of it, and we want this to be owned and run by the community, not just Expo folks. So please pitch in if you think this is valuable and want to make it better!</li><li>Added initial support for installing npm packages in <a href="https://snack.expo.io/" target="_blank" rel="noopener noreferrer">Snack</a> with Expo SDK 19. Let us know if you run into any issues with it, we are still working through some bugs. Along with Native Directory, this should make it easy to test libraries that have only JS dependencies, or dependencies included in <a href="https://github.com/expo/expo-sdk" target="_blank" rel="noopener noreferrer">Expo SDK</a>. Try it out:<ul><li><a href="https://snack.expo.io/ByBCD_2r-" target="_blank" rel="noopener noreferrer">react-native-modal</a></li><li><a href="https://snack.expo.io/SJfJguhrW" target="_blank" rel="noopener noreferrer">react-native-animatable</a></li><li><a href="https://snack.expo.io/HkoXUdhr-" target="_blank" rel="noopener noreferrer">react-native-calendars</a></li></ul></li><li><a href="https://blog.expo.io/expo-sdk-v19-0-0-is-now-available-821a62b58d3d" target="_blank" rel="noopener noreferrer">Released Expo SDK19</a> with a bunch of improvements across the board, and we&#x27;re now using the <a href="https://github.com/SoftwareMansion/jsc-android-buildscripts" target="_blank" rel="noopener noreferrer">updated Android JSC</a>.</li><li>Working on a guide in docs with <a href="https://github.com/frantic" target="_blank" rel="noopener noreferrer">Alexander Kotliarskyi</a> with a list of tips on how to improve the user experience of your app. Please join in and add to the list or help write some of it!<ul><li>Issue: <a href="https://github.com/facebook/react-native/issues/14979" target="_blank" rel="noopener noreferrer">#14979</a></li><li>Initial pull request: <a href="https://github.com/facebook/react-native/pull/14993" target="_blank" rel="noopener noreferrer">#14993</a></li></ul></li><li>Continuing to work on: audio/video, camera, gestures (with Software Mansion, <code>react-native-gesture-handler</code>), GL camera integration and hoping to land some of these for the first time in SDK20 (August), and significant improvements to others by then as well. We&#x27;re just getting started on building infrastructure into the Expo client for background work (geolocation, audio, handling notifications, etc.).</li><li><a href="https://twitter.com/skevy" target="_blank" rel="noopener noreferrer">Adam Miskiewicz</a> has made some nice progress on imitating the transitions from <a href="https://developer.apple.com/documentation/uikit/uinavigationcontroller" target="_blank" rel="noopener noreferrer">UINavigationController</a> in <a href="https://github.com/react-community/react-navigation" target="_blank" rel="noopener noreferrer">react-navigation</a>. Check out an earlier version of it in <a href="https://twitter.com/skevy/status/884932473070735361" target="_blank" rel="noopener noreferrer">his tweet</a> - release coming with it soon. Also check out <code>MaskedViewIOS</code> which he <a href="https://github.com/facebook/react-native/commit/8ea6cea39a3db6171dd74838a6eea4631cf42bba" target="_blank" rel="noopener noreferrer">upstreamed</a>. If you have the skills and desire to implement <code>MaskedView</code> for Android that would be awesome!</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="facebook"></a>Facebook<a aria-hidden="true" tabindex="-1" class="hash-link" href="#facebook" title="Direct link to heading">#</a></h3><ul><li>Facebook is internally exploring being able to embed native <a href="http://componentkit.org/" target="_blank" rel="noopener noreferrer">ComponentKit</a> and <a href="https://fblitho.com/" target="_blank" rel="noopener noreferrer">Litho</a> components inside of React Native.</li><li>Contributions to React Native are very welcome! If you are wondering how you can contribute, the <a href="https://github.com/facebook/react-native-website/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">&quot;How to Contribute&quot; guide</a> describes our development process and lays out the steps to send your first pull request. There are other ways to contribute that do not require writing code, such as by triaging issues or updating the docs.<ul><li>At the time of writing, React Native has <strong>635</strong> <a href="https://github.com/facebook/react-native/issues" target="_blank" rel="noopener noreferrer">open issues</a> and <strong>249</strong> <a href="https://github.com/facebook/react-native/pulls" target="_blank" rel="noopener noreferrer">open pull requests</a>. This is overwhelming for our maintainers, and when things get fixed internally, it is difficult to ensure the relevant tasks are updated.</li><li>We are unsure what the best approach is to handle this while keeping the community satisfied. Some (but not all!) options include closing stale issues, giving significantly more people permissions to manage issues, and automatically closing issues that do not follow the issue template. We wrote a &quot;What to Expect from Maintainers&quot; guide to set expectations and avoid surprises. If you have ideas on how we can make this experience better for maintainers as well as ensuring people opening issues and pull requests feel heard and valued, please let us know!</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="geekyants"></a>GeekyAnts<a aria-hidden="true" tabindex="-1" class="hash-link" href="#geekyants" title="Direct link to heading">#</a></h3><ul><li>We demoed the Designer Tool which works with React Native files on Chain React. Many attendees signed up for the waiting list.</li><li>We are also looking at other cross-platform solutions like <a href="https://flutter.io/" target="_blank" rel="noopener noreferrer">Google Flutter</a> (a major comparison coming along), <a href="https://github.com/JetBrains/kotlin-native" target="_blank" rel="noopener noreferrer">Kotlin Native</a>, and <a href="https://weex.incubator.apache.org/" target="_blank" rel="noopener noreferrer">Apache Weex</a> to understand the architectural differences and what we can learn from them to improve the overall performance of React Native.</li><li>Switched to <a href="https://github.com/react-community/react-navigation" target="_blank" rel="noopener noreferrer">react-navigation</a> for most of our apps, which has improved the overall performance.</li><li>Also, announced <a href="https://market.nativebase.io/" target="_blank" rel="noopener noreferrer">NativeBase Market</a> - A marketplace for React Native components and apps (for and by the developers).</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="infinite-red"></a>Infinite Red<a aria-hidden="true" tabindex="-1" class="hash-link" href="#infinite-red" title="Direct link to heading">#</a></h3><ul><li>We want to introduce the <a href="https://github.com/infinitered/reactotron" target="_blank" rel="noopener noreferrer">Reactotron</a>. Check out the <a href="https://www.youtube.com/watch?v=tPBRfxswDjA" target="_blank" rel="noopener noreferrer">introductory video</a>. We&#x27;ll be adding more features very soon!</li><li>Organised Chain React Conference. It was awesome, thanks all for coming! <a href="https://www.youtube.com/playlist?list=PLFHvL21g9bk3RxJ1Ut5nR_uTZFVOxu522" target="_blank" rel="noopener noreferrer">The videos are now online!</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="microsoft"></a>Microsoft<a aria-hidden="true" tabindex="-1" class="hash-link" href="#microsoft" title="Direct link to heading">#</a></h3><ul><li><a href="https://github.com/Microsoft/code-push" target="_blank" rel="noopener noreferrer">CodePush</a> has now been integrated into <a href="https://mobile.azure.com/" target="_blank" rel="noopener noreferrer">Mobile Center</a>. Existing users will have no change in their workflow.<ul><li>Some people have reported an issue with duplicate apps - they already had an app on Mobile Center. We are working on resolving them, but if you have two apps, let us know, and we can merge them for you.</li></ul></li><li>Mobile Center now supports Push Notifications for CodePush. We also showed how a combination of Notifications and CodePush could be used for A/B testing apps - something unique to the ReactNative architecture.</li><li><a href="https://github.com/Microsoft/vscode" target="_blank" rel="noopener noreferrer">VSCode</a> has a known debugging issue with ReactNative - the next release of the extension in a couple of days will be fixing the issue.</li><li>Since there are many other teams also working on React Native inside Microsoft, we will work on getting better representation from all the groups for the next meeting.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="shoutem"></a>Shoutem<a aria-hidden="true" tabindex="-1" class="hash-link" href="#shoutem" title="Direct link to heading">#</a></h3><ul><li>Finished the process of making the React Native development easier on <a href="https://shoutem.github.io/" target="_blank" rel="noopener noreferrer">Shoutem</a>. You can use all the standard <code>react-native</code> commands when developing apps on Shoutem.</li><li>We did a lot of work trying to figure out how to best approach the profiling on React Native. A big chunk of <a href="/docs/performance">documentation</a> is outdated, and we&#x27;ll do our best to create a pull request on the official docs or at least write some of our conclusions in a blog post.</li><li>Switching our navigation solution to <a href="https://github.com/react-community/react-navigation" target="_blank" rel="noopener noreferrer">react-navigation</a>, so we might have some feedback soon.</li><li>We released <a href="https://github.com/shoutem/ui/tree/develop/html" target="_blank" rel="noopener noreferrer">a new HTML component</a> in our toolkit which transforms the raw HTML to the React Native components tree.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="wix"></a>Wix<a aria-hidden="true" tabindex="-1" class="hash-link" href="#wix" title="Direct link to heading">#</a></h3><ul><li>We started working on a pull request to <a href="https://github.com/facebook/metro" target="_blank" rel="noopener noreferrer">Metro Bundler</a> with <a href="https://github.com/wix/react-native-repackager" target="_blank" rel="noopener noreferrer">react-native-repackager</a> capabilities. We updated react-native-repackager to support RN 44 (which we use in production). We are using it for our mocking infrastructure for <a href="https://github.com/wix/detox" target="_blank" rel="noopener noreferrer">detox</a>.</li><li>We have been covering the Wix app in detox tests for the last three weeks. It&#x27;s an amazing learning experience of how to reduce manual QA in an app of this scale (over 40 engineers). We have resolved several issues with detox as a result, a new version was just published. I am happy to report that we are living up to the &quot;zero flakiness policy&quot; and the tests are passing consistently so far.</li><li>Detox for Android is moving forward nicely. We are getting significant help from the community. We are expecting an initial version in about two weeks.</li><li><a href="https://github.com/wix/detoxinstruments" target="_blank" rel="noopener noreferrer">DetoxInstruments</a>, our performance testing tool, is getting a little bigger than we originally intended. We are now planning to turn it into a standalone tool that will not be tightly coupled to detox. It will allow investigating the performance of iOS apps in general. It will also be integrated with detox so we can run automated tests on performance metrics.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="next-session"></a>Next session<a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-session" title="Direct link to heading">#</a></h2><p>The next session is scheduled for August 16, 2017. As this was only our second meeting, we&#x27;d like to know how do these notes benefit the React Native community. Feel free to ping me <a href="https://twitter.com/TomislavTenodi" target="_blank" rel="noopener noreferrer">on Twitter</a> if you have any suggestion on how we should improve the output of the meeting.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_206m"><a href="/blog/2017/06/21/react-native-monthly-1">React Native Monthly #1</a></h2><div class="margin-vert--md"><time datetime="2017-06-21T00:00:00.000Z" class="blogPostDate_BxXe">June 21, 2017  · 6 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/tenodi" target="_blank" rel="noreferrer noopener"><img src="https://pbs.twimg.com/profile_images/877237660225609729/bKFDwfAq.jpg" alt="Tomislav Tenodi"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/tenodi" target="_blank" rel="noreferrer noopener">Tomislav Tenodi</a></h4><small class="avatar__subtitle">Product Manager at Shoutem</small></div></div></header><section class="markdown"><p>At <a href="https://shoutem.github.io/" target="_blank" rel="noopener noreferrer">Shoutem</a>, we&#x27;ve been fortunate enough to work with React Native from its very beginnings. We decided we wanted to be part of the amazing community from day one. Soon enough, we realized it&#x27;s almost impossible to keep up with the pace the community was growing and improving. That&#x27;s why we decided to organize a monthly meeting where all major React Native contributors can briefly present what their efforts and plans are.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="monthly-meetings"></a>Monthly meetings<a aria-hidden="true" tabindex="-1" class="hash-link" href="#monthly-meetings" title="Direct link to heading">#</a></h2><p>We had our first session of the monthly meeting on June 14, 2017. The mission for React Native Monthly is simple and straightforward: <strong>improve the React Native community</strong>. Presenting teams&#x27; efforts eases collaboration between teams done offline.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="teams"></a>Teams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#teams" title="Direct link to heading">#</a></h2><p>On the first meeting, we had 8 teams join us:</p><ul><li><a href="https://github.com/airbnb" target="_blank" rel="noopener noreferrer">Airbnb</a></li><li><a href="https://github.com/callstack-io" target="_blank" rel="noopener noreferrer">Callstack</a></li><li><a href="https://github.com/expo" target="_blank" rel="noopener noreferrer">Expo</a></li><li><a href="https://github.com/facebook" target="_blank" rel="noopener noreferrer">Facebook</a></li><li><a href="https://github.com/GeekyAnts" target="_blank" rel="noopener noreferrer">GeekyAnts</a></li><li><a href="https://github.com/microsoft" target="_blank" rel="noopener noreferrer">Microsoft</a></li><li><a href="https://github.com/shoutem" target="_blank" rel="noopener noreferrer">Shoutem</a></li><li><a href="https://github.com/wix" target="_blank" rel="noopener noreferrer">Wix</a></li></ul><p>We hope to have more core contributors join the upcoming sessions!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="notes"></a>Notes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#notes" title="Direct link to heading">#</a></h2><p>As teams&#x27; plans might be of interest to a broader audience, we&#x27;ll be sharing them here, on the React Native blog. So, here they are:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="airbnb"></a>Airbnb<a aria-hidden="true" tabindex="-1" class="hash-link" href="#airbnb" title="Direct link to heading">#</a></h3><ul><li>Plans to add some A11y (accessibility) APIs to <code>View</code> and the <code>AccessibilityInfo</code> native module.</li><li>Will be investigating adding some APIs to native modules on Android to allow for specifying threads for them to run on.</li><li>Have been investigating potential initialization performance improvements.</li><li>Have been investigating some more sophisticated bundling strategies to use on top of &quot;unbundle&quot;.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="callstack"></a>Callstack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#callstack" title="Direct link to heading">#</a></h3><ul><li>Looking into improving the release process by using <a href="https://github.com/wix/detox" target="_blank" rel="noopener noreferrer">Detox</a> for E2E testing. Pull request should land soon.</li><li>Blob pull request they have been working on has been merged, subsequent pull requests coming up.</li><li>Increasing <a href="https://github.com/callstack-io/haul" target="_blank" rel="noopener noreferrer">Haul</a> adoption across internal projects to see how it performs compared to <a href="http://github.com/facebook/metro-bundler" target="_blank" rel="noopener noreferrer">Metro Bundler</a>. Working on better multi-threaded performance with the Webpack team.</li><li>Internally, they have implemented a better infrastructure to manage open source projects. Plans to be getting more stuff out in upcoming weeks.</li><li>The React Native Europe conference is coming along, nothing interesting yet, but y&#x27;all invited!</li><li>Stepped back from <a href="https://github.com/react-community/react-navigation" target="_blank" rel="noopener noreferrer">react-navigation</a> for a while to investigate alternatives (especially native navigations).</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="expo"></a>Expo<a aria-hidden="true" tabindex="-1" class="hash-link" href="#expo" title="Direct link to heading">#</a></h3><ul><li>Working on making it possible to install npm modules in <a href="https://snack.expo.io/" target="_blank" rel="noopener noreferrer">Snack</a>, will be useful for libraries to add examples to documentation.</li><li>Working with <a href="https://github.com/kmagiera" target="_blank" rel="noopener noreferrer">Krzysztof</a> and other people at <a href="https://github.com/software-mansion" target="_blank" rel="noopener noreferrer">Software Mansion</a> on a JSC update on Android and a gesture handling library.</li><li><a href="https://github.com/skevy" target="_blank" rel="noopener noreferrer">Adam Miskiewicz</a> is transitioning his focus towards <a href="https://github.com/react-community/react-navigation" target="_blank" rel="noopener noreferrer">react-navigation</a>.</li><li><a href="https://github.com/react-community/create-react-native-app" target="_blank" rel="noopener noreferrer">Create React Native App</a> is in the <a href="/docs/getting-started">Getting Started guide</a> in the docs. Expo wants to encourage library authors to explain clearly whether their lib works with CRNA or not, and if so, explain how to set it up.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="facebook"></a>Facebook<a aria-hidden="true" tabindex="-1" class="hash-link" href="#facebook" title="Direct link to heading">#</a></h3><ul><li>React Native&#x27;s packager is now <a href="https://github.com/facebook/metro" target="_blank" rel="noopener noreferrer">Metro Bundler</a>, in an independent repo. The Metro Bundler team in London is excited to address the needs of the community, improve modularity for additional use-cases beyond React Native, and increase responsiveness on issues and PRs.</li><li>In the coming months, the React Native team will work on refining the APIs of primitive components. Expect improvements in layout quirks, accessibility, and flow typing.</li><li>The React Native team also plans on improving core modularity this year, by refactoring to fully support 3rd party platforms such as Windows and macOS.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="geekyants"></a>GeekyAnts<a aria-hidden="true" tabindex="-1" class="hash-link" href="#geekyants" title="Direct link to heading">#</a></h3><ul><li>The team is working on a UI/UX design app (codename: Builder) which directly works with <code>.js</code> files. Right now, it supports only React Native. It’s similar to Adobe XD and Sketch.</li><li>The team is working hard so that you can load up an existing React Native app in the editor, make changes (visually, as a designer) and save the changes directly to the JS file.</li><li>Folks are trying to bridge the gap between Designers and Developers and bring them on the same repo.</li><li>Also, <a href="https://github.com/GeekyAnts/NativeBase" target="_blank" rel="noopener noreferrer">NativeBase</a> recently reached 5,000 GitHub stars.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="microsoft"></a>Microsoft<a aria-hidden="true" tabindex="-1" class="hash-link" href="#microsoft" title="Direct link to heading">#</a></h3><ul><li><a href="https://github.com/Microsoft/code-push" target="_blank" rel="noopener noreferrer">CodePush</a> has now been integrated into <a href="https://mobile.azure.com/" target="_blank" rel="noopener noreferrer">Mobile Center</a>. This is the first step in providing a much more integrated experience with distribution, analytics and other services. See their announcement <a href="https://microsoft.github.io/code-push/articles/CodePushOnMobileCenter.html" target="_blank" rel="noopener noreferrer">here</a>.</li><li><a href="https://github.com/Microsoft/vscode" target="_blank" rel="noopener noreferrer">VSCode</a> has a bug with debugging, they are working on fixing that right now and will have a new build.</li><li>Investigating <a href="https://github.com/wix/detox" target="_blank" rel="noopener noreferrer">Detox</a> for Integration testing, looking at JSC Context to get variables alongside crash reports.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="shoutem"></a>Shoutem<a aria-hidden="true" tabindex="-1" class="hash-link" href="#shoutem" title="Direct link to heading">#</a></h3><ul><li>Making it easier to work on Shoutem apps with tools from the React Native community. You will be able to use all the React Native commands to run the apps created on <a href="https://shoutem.github.io/" target="_blank" rel="noopener noreferrer">Shoutem</a>.</li><li>Investigating profiling tools for React Native. They had a lot of problems setting it up and they will write some of the insights they discovered along the way.</li><li>Shoutem is working on making it easier to integrate React Native with existing native apps. They will document the concept that they developed internally in the company, in order to get the feedback from the community.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="wix"></a>Wix<a aria-hidden="true" tabindex="-1" class="hash-link" href="#wix" title="Direct link to heading">#</a></h3><ul><li>Working internally to adopt <a href="https://github.com/wix/detox" target="_blank" rel="noopener noreferrer">Detox</a> to move significant parts of the Wix app to &quot;zero manual QA&quot;. As a result, Detox is being used heavily in a production setting by dozens of developers and maturing rapidly.</li><li>Working to add support to the <a href="https://github.com/facebook/metro" target="_blank" rel="noopener noreferrer">Metro Bundler</a> for overriding any file extension during the build. Instead of just &quot;ios&quot; and &quot;android&quot;, it would support any custom extension like &quot;e2e&quot; or &quot;detox&quot;. Plans to use this for E2E mocking. There&#x27;s already a library out called <a href="https://github.com/wix/react-native-repackager" target="_blank" rel="noopener noreferrer">react-native-repackager</a>, now working on a PR.</li><li>Investigating automation of performance tests. This is a new repo called <a href="https://github.com/wix/DetoxInstruments" target="_blank" rel="noopener noreferrer">DetoxInstruments</a>. You can take a look, it&#x27;s being developed open source.</li><li>Working with a contributor from KPN on Detox for Android and supporting real devices.</li><li>Thinking about &quot;Detox as a platform&quot; to allow building other tools that need to automate the simulator/device. An example is <a href="https://github.com/storybooks/react-native-storybook" target="_blank" rel="noopener noreferrer">Storybook</a> for React Native or Ram&#x27;s idea for integration testing.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="next-session"></a>Next session<a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-session" title="Direct link to heading">#</a></h2><p>Meetings will be held every four weeks. The next session is scheduled for July 12, 2017. As we just started with this meeting, we&#x27;d like to know how do these notes benefit the React Native community. Feel free to ping me <a href="https://twitter.com/TomislavTenodi" target="_blank" rel="noopener noreferrer">on Twitter</a> if you have any suggestion on what we should cover in the following sessions, or how we should improve the output of the meeting.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/page/2"><h4 class="pagination-nav__label">« Newer Entries</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/page/4"><h4 class="pagination-nav__label">Older Entries »</h4></a></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/components-and-apis">Components and APIs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/more-resources">More Resources</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/help">The React Native Community</a></li><li class="footer__item"><a class="footer__link-item" href="/showcase">Who&#x27;s using React Native?</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/react-native" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ask Questions on Stack Overflow</a></li><li class="footer__item"><a href="https://github.com/facebook/react-native/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributor Guide</a></li><li class="footer__item"><a href="https://dev.to/t/reactnative" target="_blank" rel="noopener noreferrer" class="footer__link-item">DEV Community</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Find us</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://twitter.com/reactnative" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">React</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_19Ac"><img class="footer__logo" alt="Facebook Open Source Logo" src="/img/oss_logo.png"></a></div><div>Copyright © 2020 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.73cf9778.js"></script>
<script src="/runtime~main.1add4549.js"></script>
<script src="/main.3b1f3498.js"></script>
<script src="/1.17a0cf36.js"></script>
<script src="/2.37a050b1.js"></script>
<script src="/3.a77189d5.js"></script>
<script src="/01a85c17.6e3f79c4.js"></script>
<script src="/1be78505.5efc14b5.js"></script>
<script src="/52cb2878.7b16da74.js"></script>
<script src="/5fc994c2.bb75c0a3.js"></script>
<script src="/6875c492.473436b1.js"></script>
<script src="/a6aa9e1f.49affcc9.js"></script>
<script src="/c4f5d8e4.9625a734.js"></script>
<script src="/ccc49370.4fe1b01e.js"></script>
<script src="/942.91182cb1.js"></script>
<script src="/e4eeaf16.0a7d73bc.js"></script>
<script src="/ef5977c1.29b4655a.js"></script>
<script src="/e2632152.4c8e740a.js"></script>
<script src="/7dac272e.8b3f909f.js"></script>
<script src="/90fb1d19.242863dc.js"></script>
<script src="/b6c98dba.f970a185.js"></script>
<script src="/e82978d2.0308e776.js"></script>
<script src="/25872cd8.f9726ec7.js"></script>
<script src="/9638e746.26d650f9.js"></script>
<script src="/f1e5627d.c14ad7c1.js"></script>
<script src="/548ca8d1.7290d805.js"></script>
<script src="/92999a1c.726e0f7e.js"></script>
</body>
</html>